"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[512],{88031:function(H,_,n){n.d(_,{P:function(){return C}});var C=function(l){return l.TOKEN="_|see_what_see|__|-_-||__",l.USER="_|see_what_see|__|-_-|__",l}({})},28666:function(H,_,n){n.d(_,{$G:function(){return P},YG:function(){return c},rS:function(){return N}});var C=n(19931),l=n(88031),$=n(73310),m=n(93321),N={token:{borderRadius:2}};function c(y){C.y$.setStorage(l.P.USER,y.name),C.y$.setStorage(l.P.TOKEN,y.token),$.t.success({message:"".concat(y.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),m.m8.push("/home")}function P(){C.y$.removeStorage(l.P.USER),C.y$.removeStorage(l.P.TOKEN),m.m8.replace("/login")}},52687:function(H,_,n){n.r(_),n.d(_,{default:function(){return be}});var C=n(87329),l=n.n(C),$=n(12323),m=n.n($),N=n(63260),c=n.n(N),P=n(42035),y=n.n(P),h=n(2784),j=n(72779),te=n.n(j),S={"rule-card":"rule-card___WaxcT",label:"label___nIS8E",value:"value___yVhR9"},F=n(14538),ae=n(98599),T=n(24832),b=n(88926),E=n(37517),se=n(77138),e=n(52322);function a(D){var v=D.rule,K=D.onClick,z=D.onRemove,X=v.prefix.toLocaleUpperCase();return(0,e.jsx)(F.Z,{title:X,bordered:!1,className:S["rule-card"],extra:(0,e.jsx)(ae.Z,{title:"\u5220\u9664\u670D\u52A1",description:"\u4F60\u786E\u5B9A\u8981\u5220\u9664 ".concat(X," \u5417?"),icon:(0,e.jsx)(se.Z,{style:{color:"red"}}),okText:"\u786E\u5B9A\u5220\u9664",cancelText:"\u53D6\u6D88",onConfirm:z,children:(0,e.jsx)(T.ZP,{type:"link",danger:!0,children:"\u5220\u9664"})}),children:(0,e.jsxs)("div",{onClick:K,children:[(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u524D\u7F00"}),(0,e.jsxs)(E.Z,{className:S.value,span:14,children:["/",v.prefix]})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u76EE\u6807\u670D\u52A1\u5730\u5740"}),(0,e.jsx)(E.Z,{className:S.value,span:14,children:v.nextOrigin})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u8BF7\u6C42\u65F6\u662F\u5426\u5FFD\u7565\u524D\u7F00"}),(0,e.jsx)(E.Z,{className:S.value,span:14,children:v.ignorePrefix?"\u5FFD\u7565":"\u4E0D\u5FFD\u7565"})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u9ED1\u540D\u5355\u6570"}),(0,e.jsx)(E.Z,{className:S.value,span:14,children:v.banList.length})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u767D\u540D\u5355\u6570"}),(0,e.jsx)(E.Z,{className:S.value,span:14,children:v.pickList.length})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(E.Z,{className:S.label,span:10,children:"\u6821\u9A8C\u89C4\u5219\u6570"}),(0,e.jsx)(E.Z,{className:S.value,span:14,children:v.checkers.length})]})]})})}var t=n(88133),s=n(62220),d=n(72511),i=n(52166),u={footer:"footer___vsXKH",avatar:"avatar___p4yyW",name:"name___YyFpv",actions:"actions___I0eay","icon-btn":"icon-btn___l_pQk"},g=n(19931),B=n(88031),r=n(28666),o=n(37588);function p(D){var v=g.y$.getStorage(B.P.USER),K=D.onCreate;return(0,e.jsxs)("div",{className:u.footer,children:[(0,e.jsx)("div",{className:u.avatar,children:v==null?void 0:v.substring(0,1)}),(0,e.jsx)("div",{className:u.name,children:v}),(0,e.jsxs)("div",{className:u.actions,children:[(0,e.jsx)(o.Z,{className:u["icon-btn"],onClick:K}),(0,e.jsx)("svg",{className:u["icon-btn"],onClick:r.$G,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",children:(0,e.jsx)("path",{d:"M835.669333 554.666667h-473.173333A42.453333 42.453333 0 0 1 320 512a42.666667 42.666667 0 0 1 42.474667-42.666667h473.173333l-161.813333-161.834666a42.666667 42.666667 0 0 1 60.330666-60.330667l234.666667 234.666667a42.666667 42.666667 0 0 1 0 60.330666l-234.666667 234.666667a42.666667 42.666667 0 0 1-60.330666-60.330667L835.669333 554.666667zM554.666667 42.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333C137.578667 128 128 137.578667 128 149.482667v725.034666C128 886.4 137.6 896 149.525333 896H554.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333A106.816 106.816 0 0 1 42.666667 874.517333V149.482667A106.773333 106.773333 0 0 1 149.525333 42.666667H554.666667z"})})]})]})}var Z=n(5217),Y=n.n(Z),ie=n(86093),oe=n.n(ie),q=n(46342),ue={"editor-container":"editor-container___EDWK_",editor:"editor___hVZKR"},w;function U(D){var v=(0,h.useRef)(null),K,z=function(W){return oe()(W)==="object"?JSON.stringify(W,null,2):W!=null?W:""},X=function(W){var J=Y()(W),R;try{for(J.s();!(R=J.n()).done;){var k=R.value;if(k.target===v.current){var ee,re=k.contentRect,V=re.width,ce=re.height;(ee=w)===null||ee===void 0||ee.layout({width:V,height:ce})}}}catch(ve){J.e(ve)}finally{J.f()}},le=function(){K=new ResizeObserver(X),K.observe(v.current)};return(0,h.useEffect)(function(){v.current&&(w=q.editor.create(v.current,{value:z(D.code),theme:"vs-dark",language:"json"}),w.onKeyDown(function(O){(O.ctrlKey||O.metaKey)&&O.keyCode===q.KeyCode.KeyS&&typeof D.onSave=="function"&&(O.preventDefault(),D.onSave())}),le())},[]),(0,h.useEffect)(function(){var O;(O=w)===null||O===void 0||O.setValue(z(D.code))},[D.code]),(0,e.jsx)("div",{className:ue["editor-container"],children:(0,e.jsx)("div",{className:ue.editor,ref:v})})}var _e=n(65393),Ue=n(13569),I={home:"home___Q_ZYg","card-list":"card-list___ST2i4","card-list-open":"card-list-open___uMuJK",empty:"empty___J1XuC",loading:"loading___pSngO","editor-drawer":"editor-drawer___MFS0J","editor-header":"editor-header___nlitr","editor-header-left":"editor-header-left___a3nah","editor-header-right":"editor-header-right___CBDVX","editor-container":"editor-container___Z4GZd",saving:"saving___TD1MU"},De=740,Le=400,Me={prefix:"new-service-prefix",nextOrigin:"https://example.com:8080",banList:[],pickList:[],checkers:[],ignorePrefix:!1},Fe=function(v){var K,z=h.useState([]),X=y()(z,2),le=X[0],O=X[1],W=h.useState(),J=y()(W,2),R=J[0],k=J[1],ee=h.useState(!1),re=y()(ee,2),V=re[0],ce=re[1],ve=h.useState(!1),Se=y()(ve,2),Ee=Se[0],pe=Se[1],Be=h.useState(!1),Re=y()(Be,2),Ae=Re[0],xe=Re[1],Ze=h.useState(!1),Ce=y()(Ze,2),fe=Ce[0],ye=Ce[1],Ke=h.useState(!1),Ne=y()(Ke,2),je=Ne[0],me=Ne[1],Pe=t.ZP.useMessage(),Ie=y()(Pe,2),ge=Ie[0],We=Ie[1],$e=function(){ye(!0)},Q=function(){k(void 0),ye(!1)};function de(){return he.apply(this,arguments)}function he(){return he=c()(m()().mark(function A(){var f;return m()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!V){x.next=2;break}return x.abrupt("return");case 2:return ce(!0),x.next=5,(0,i.UY)().req();case 5:f=x.sent,f.data&&O(f.data),ce(!1);case 8:case"end":return x.stop()}},A)})),he.apply(this,arguments)}var we=function(f){me(!1),k(f)},Xe=function(){var A=c()(m()().mark(function f(G){var x;return m()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!Ae){L.next=2;break}return L.abrupt("return");case 2:return xe(!0),L.next=5,(0,i.DV)(G.prefix).req();case 5:x=L.sent,xe(!1),x.success&&(ge.success("\u670D\u52A1\u5220\u9664\u6210\u529F"),de());case 8:case"end":return L.stop()}},f)}));return function(G){return A.apply(this,arguments)}}(),Je=function(){var f=document.documentElement.clientWidth;return f<=De?"100%":"".concat(f-Le,"px")},Oe=function(){var A=c()(m()().mark(function f(){var G,x,ne,L;return m()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:if(G=w==null?void 0:w.getValue(),x=(0,g.Hg)(G),!(!x||Ee)){M.next=4;break}return M.abrupt("return");case 4:if(pe(!0),!je){M.next=12;break}return M.next=8,(0,i.HP)(x).req();case 8:ne=M.sent,ne!=null&&ne.success&&(ge.success("\u65B0\u89C4\u5219\u6DFB\u52A0\u6210\u529F"),me(!1),Q(),de()),M.next=17;break;case 12:if(!R){M.next=17;break}return M.next=15,(0,i.pI)(R.prefix,x).req();case 15:L=M.sent,L!=null&&L.success&&(ge.success("\u89C4\u5219\u4FEE\u6539\u6210\u529F"),Q(),de());case 17:pe(!1);case 18:case"end":return M.stop()}},f)}));return function(){return A.apply(this,arguments)}}(),Ye=function(){me(!0),k(Me)},ze=function(f){f.target.classList.contains(I["card-list-open"])&&Q()};return h.useEffect(function(){de()},[]),h.useEffect(function(){R&&!fe?$e():R||Q()},[R]),(0,e.jsxs)("div",{className:I.home,onClick:ze,children:[We,(0,e.jsx)(s.Z,{spinning:V||Ae,className:I.loading,children:(0,g.nr)(!V,(0,g.JP)(le.length<=0,(0,e.jsx)("div",{className:I.empty,children:"\u7A7A\u7A7A\u5982\u4E5F, \u53EF\u70B9\u51FB\u4E0B\u65B9\u6309\u94AE\u6DFB\u52A0\u670D\u52A1\u54E6\uFF5E"}),(0,e.jsx)("div",{className:te()(I["card-list"],l()({},I["card-list-open"],fe)),children:le.map(function(A){return(0,e.jsx)(a,{onClick:function(){return we(A)},onRemove:function(){return Xe(A)},rule:A},A.prefix)})})))}),(0,e.jsx)(d.Z,{rootClassName:I["editor-drawer"],placement:"right",width:Je(),onClose:Q,open:fe,closable:!1,mask:!1,children:(0,e.jsxs)(s.Z,{spinning:Ee,className:I.saving,children:[(0,e.jsxs)("div",{className:I["editor-header"],children:[(0,e.jsx)("div",{className:I["editor-header-left"],children:(0,e.jsx)(_e.Z,{onClick:Q})}),(0,e.jsxs)("div",{className:I["editor-title"],children:[je?"\u521B\u5EFA":"\u7F16\u8F91"," -"," ",R==null||(K=R.prefix)===null||K===void 0?void 0:K.toLocaleUpperCase()]}),(0,e.jsx)("div",{className:I["editor-header-right"],children:(0,e.jsx)(Ue.Z,{onClick:Oe})})]}),(0,e.jsx)("div",{className:I["editor-container"],children:(0,g.nr)(!V&&!!R,(0,e.jsx)(U,{code:R,onSave:Oe},R==null?void 0:R.prefix))})]})}),(0,e.jsx)(p,{onCreate:Ye})]})},be=Fe},52166:function(H,_,n){n.d(_,{HP:function(){return g},UY:function(){return d},x4:function(){return s},pI:function(){return u},DV:function(){return B}});var C=n(13311),l=n.n(C),$=n(93321),m=n(88031),N=n(19931),c=n(37164),P=function(r){return r[r.OK=200]="OK",r[r.BAN=401]="BAN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.USER_NOT_FOUND=4040]="USER_NOT_FOUND",r[r.CHECK_FAIL=405]="CHECK_FAIL",r[r.REQ_EXCEPTION=406]="REQ_EXCEPTION",r[r.MISSING_BODY=407]="MISSING_BODY",r[r.MISSING_PARAM=408]="MISSING_PARAM",r[r.PASSWORD_ERROR=409]="PASSWORD_ERROR",r[r.UNAUTHORIZED=410]="UNAUTHORIZED",r[r.AUTH_EXPIRED=411]="AUTH_EXPIRED",r[r.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS",r[r.USER_EXIST=413]="USER_EXIST",r[r.RULE_EXIST=414]="RULE_EXIST",r[r.MODIFY_FAIL=415]="MODIFY_FAIL",r}({}),y=function(r){return r.OK="OK",r.BAN="Access denied",r.NOT_FOUND="Not found",r.USER_NOT_FOUND="User not found",r.CHECK_FAIL="Condition is not satisfied",r.REQ_EXCEPTION="Request exception",r.MISSING_BODY="Missing request body",r.MISSING_PARAM="Missing request parameters",r.PASSWORD_ERROR="Password error",r.UNAUTHORIZED="Unauthorized access",r.AUTH_EXPIRED="Authorization expiration",r.ILLEGAL_ACCESS="Illegal access",r.USER_EXIST="User already exists",r.RULE_EXIST="Rule already exists",r.MODIFY_FAIL="Modification failed",r}({}),h=n(73310),j={timer:void 0,visible:!1};function te(r,o){o!=null&&o.silentError||j.visible||(j.visible=!0,clearTimeout(j.timer),h.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(o==null?void 0:o.customErrorMsg)||(r instanceof Error?r.name||r.message:"Request Error")}),j.timer=window.setTimeout(function(){j.visible=!1},3e3))}function S(r,o){[P.UNAUTHORIZED,P.AUTH_EXPIRED,P.ILLEGAL_ACCESS].includes(r.code)&&(N.y$.removeStorage(m.P.TOKEN),N.y$.removeStorage(m.P.USER),$.m8.replace("/login")),!j.visible&&!(o!=null&&o.silentBusinessError)&&(j.visible=!0,clearTimeout(j.timer),h.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(o==null?void 0:o.customErrorMsg)||r.message||"Business Exception"}),j.timer=window.setTimeout(function(){j.visible=!1},3e3))}function F(r,o,p,Z){var Y=new AbortController,ie=N.y$.getStorage(m.P.TOKEN),oe=new Headers(l()({"Content-Type":"application/json","trace-id":(0,c.x0)()},Z==null?void 0:Z.headers));ie&&oe.set("Authorization",ie);var q=l()({method:r,headers:oe,signal:Y.signal},Z);p&&(q.body=JSON.stringify(p));var ue=function(){return fetch(o,q).then(function(U){return U.json()}).then(function(U){return U.success||S(U,Z),U}).catch(function(U){return te(U,Z),{code:U==null?void 0:U.code,message:"",success:!1,data:null}})};return{req:ue,abortController:Y}}function ae(r,o,p){var Z=new URLSearchParams(o),Y=r.includes("?")?"&":"?";return F("GET","".concat(r).concat(Y).concat(Z),void 0,p)}function T(r,o,p){return F("POST",r,o,p)}function b(r,o,p){return F("DELETE",r,o,p)}function E(r,o,p){return F("PATCH",r,o,p)}function se(r,o,p){return F("PUT",r,o,p)}function e(r,o,p){return F("OPTIONS",r,o,p)}var a={get:ae,post:T,put:se,patch:E,delete:b,options:e},t=a;function s(r){return t.post("/__internal/api/user/login",r)}function d(){return t.get("/__internal/api/rule/all")}function i(r){return request.get("/__internal/api/rule/prefix",{prefix:r})}function u(r,o){return t.post("/__internal/api/rule/modify",{prefix:r,next:o})}function g(r){return t.post("/__internal/api/rule/add",r)}function B(r){return t.delete("/__internal/api/rule/remove",{prefix:r})}},19931:function(H,_,n){n.d(_,{Hg:function(){return T},JP:function(){return b},nr:function(){return E},y$:function(){return P}});var C=n(86093),l=n.n(C),$=n(324),m=n.n($),N=n(80828),c=n.n(N),P=function(){function e(){m()(this,e)}return c()(e,null,[{key:"getStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;if(d){var i=d.getItem(t);if(i){if(i.indexOf("obj-")===0)return i=i.slice(4),JSON.parse(i);if(i.indexOf("str-")===0)return i.slice(4)}}}},{key:"setStorage",value:function(t,s){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var i=s;l()(i)==="object"?(i=JSON.stringify(i),i="obj-"+i):i="str-"+i;var u=d;u&&u.setItem(t,i)}}},{key:"removeStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;d&&t&&d.removeItem(t)}},{key:"clearStorage",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=t;s&&s.clear()}},{key:"getSession",value:function(t){return this.getStorage(t,sessionStorage)}},{key:"setSession",value:function(t,s){this.setStorage(t,s,sessionStorage)}},{key:"removeSession",value:function(t){this.removeStorage(t,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),e}();function y(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),t=document.createElement("style");t.id=a;var s=document.createTextNode(e);return t.appendChild(s),document.head.appendChild(t),t}function h(e){if(typeof e=="string"){var a=document.head.querySelector("#".concat(e));a==null||a.remove()}else{var t;e==null||(t=e.remove)===null||t===void 0||t.call(e)}}function j(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(d){var i,u;if(!(s!=null&&(i=s.classList)!==null&&i!==void 0&&(u=i.contains)!==null&&u!==void 0&&u.call(i,d))){var g,B;s==null||(g=s.classList)===null||g===void 0||(B=g.add)===null||B===void 0||B.call(g,d)}})}function te(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(d){var i,u;s!=null&&(i=s.classList)!==null&&i!==void 0&&(u=i.contains)!==null&&u!==void 0&&u.call(i,d)&&s.classList.remove(d)})}function S(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(d){var i,u;if(s!=null&&(i=s.classList)!==null&&i!==void 0&&(u=i.contains)!==null&&u!==void 0&&u.call(i,d))s.classList.remove(d);else{var g,B;s==null||(g=s.classList)===null||g===void 0||(B=g.add)===null||B===void 0||B.call(g,d)}})}var F=function(a,t){return typeof a=="function"?a.apply(null,t):void 0};function ae(e,a,t){try{return F(e,a)}catch(s){F(t,[s])}}var T=function(a,t){try{return JSON.parse(a,t)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},b=function(a,t,s){return(typeof a=="function"?a():a)?t:s},E=function(a,t){return b(a,t,null)};function se(e){var a=e.trim().toLocaleLowerCase();return a.replace(a[0],a[0].toUpperCase())}},73310:function(H,_,n){n.d(_,{t:function(){return m}});var C=n(92951),l=n.n(C),$=n(10947);l().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var m={success:function(c){return l().success(c.description,c.message)},info:function(c){return l().info(c.description,c.message)},warning:function(c){return l().warning(c.description,c.message)},error:function(c){return l().error(c.description,c.message)}}}}]);
