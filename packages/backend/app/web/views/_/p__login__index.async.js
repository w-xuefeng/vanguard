"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[939],{88031:function(P,g,n){n.d(g,{P:function(){return c}});var c;(function(i){i.TOKEN="_|see_what_see|__|-_-||__",i.USER="_|see_what_see|__|-_-|__"})(c||(c={}))},28666:function(P,g,n){n.d(g,{$G:function(){return A},YG:function(){return l},rS:function(){return E}});var c=n(19931),i=n(88031),N=n(73310),R=n(93321),E={token:{borderRadius:2}};function l(m){c.y$.setStorage(i.P.USER,m.name),c.y$.setStorage(i.P.TOKEN,m.token),N.t.success({message:"".concat(m.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),R.m8.push("/home")}function A(){c.y$.removeStorage(i.P.USER),c.y$.removeStorage(i.P.TOKEN),R.m8.replace("/login")}},61985:function(P,g,n){n.d(g,{a:function(){return N}});var c=n(88031),i=n(19931);function N(){return{isLogin:i.y$.getStorage(c.P.USER)}}},31591:function(P,g,n){n.r(g),n.d(g,{default:function(){return s}});var c=n(12323),i=n.n(c),N=n(63260),R=n.n(N),E=n(87329),l=n.n(E),A=n(42035),m=n.n(A),_=n(2784),p=n(72779),j=n.n(p),W=n.p+"static/logo.5376c493.png",U=n(24994),M=n(14053),K=n(52166),x=n(61985),F=n(93321),I={"login-page":"login-page___k7G33",cover:"cover___Tegwf","cover-close":"cover-close___Xp_zY",logo:"logo___GKoHn",divider:"divider___l4jgJ","divider-open":"divider-open___CKvP9",panel:"panel___z51j4",input:"input___OHY6b","input-open":"input-open___YQTpO"},o=n(28666),t=n(52322),r=function(a){(0,x.a)().isLogin&&F.m8.back();var f=(0,_.useState)(!1),S=m()(f,2),O=S[0],e=S[1],u=(0,_.useState)(!1),v=m()(u,2),y=v[0],B=v[1],X=(0,_.useState)(!1),b=m()(X,2),Y=b[0],J=b[1],Q=(0,_.useState)(!1),h=m()(Q,2),V=h[0],k=h[1],ae=(0,_.useState)(!1),T=m()(ae,2),H=T[0],q=T[1],ue=j()([I.divider,l()({},I["divider-open"],O)]),ee=j()([I.input,l()({},I["input-open"],y)]),ie=j()([I.cover,l()({},I["cover-close"],Y)]),le=function(){J(!0)},de=function(){J(!1)},ce=(0,_.useState)(),ne=m()(ce,2),Z=ne[0],fe=ne[1],ve=(0,_.useState)(),te=m()(ve,2),G=te[0],me=te[1],re=(0,_.useRef)(null),se=(0,_.useRef)(null),ge=function(L){fe(L.target.value),V&&k(!1)},_e=function(L){me(L.target.value),H&&q(!1)},oe=function(){var C=R()(i()().mark(function L(){var $,z,w;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(Z){D.next=4;break}return($=re.current)===null||$===void 0||$.focus({cursor:"end"}),k(!0),D.abrupt("return");case 4:if(G){D.next=8;break}return(z=se.current)===null||z===void 0||z.focus({cursor:"end"}),q(!0),D.abrupt("return");case 8:return D.next=10,(0,K.x4)({name:Z,password:G}).req();case 10:w=D.sent,w!=null&&w.data&&(0,o.YG)(w.data);case 12:case"end":return D.stop()}},L)}));return function(){return C.apply(this,arguments)}}(),Se=function(L){L.key.toLocaleUpperCase()==="ENTER"&&oe()};return _.useEffect(function(){var C=setTimeout(function(){e(!0)},100),L=setTimeout(function(){B(!0)},500);return function(){clearTimeout(C),clearTimeout(L)}},[]),(0,t.jsx)("div",{className:I["login-page"],children:(0,t.jsxs)("div",{className:ie,children:[(0,t.jsx)("img",{src:W,alt:"logo",className:I.logo,onClick:oe}),(0,t.jsx)("div",{className:ue}),(0,t.jsxs)("div",{className:I.panel,children:[(0,t.jsx)(M.Z,{className:ee,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",prefix:(0,t.jsx)(U.Z,{}),value:Z,onInput:ge,ref:re,status:V?"error":void 0}),(0,t.jsx)(M.Z.Password,{className:ee,onFocus:le,onBlur:de,placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:G,onInput:_e,onKeyDownCapture:Se,ref:se,status:H?"error":void 0})]})]})})},s=r},52166:function(P,g,n){n.d(g,{HP:function(){return S},UY:function(){return d},x4:function(){return s},pI:function(){return f},DV:function(){return O}});var c=n(13311),i=n.n(c),N=n(93321),R=n(88031),E=n(19931),l=n(37164),A;(function(e){e[e.OK=200]="OK",e[e.BAN=401]="BAN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.USER_NOT_FOUND=4040]="USER_NOT_FOUND",e[e.CHECK_FAIL=405]="CHECK_FAIL",e[e.REQ_EXCEPTION=406]="REQ_EXCEPTION",e[e.MISSING_BODY=407]="MISSING_BODY",e[e.MISSING_PARAM=408]="MISSING_PARAM",e[e.PASSWORD_ERROR=409]="PASSWORD_ERROR",e[e.UNAUTHORIZED=410]="UNAUTHORIZED",e[e.AUTH_EXPIRED=411]="AUTH_EXPIRED",e[e.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS",e[e.USER_EXIST=413]="USER_EXIST",e[e.RULE_EXIST=414]="RULE_EXIST",e[e.MODIFY_FAIL=415]="MODIFY_FAIL"})(A||(A={}));var m;(function(e){e.OK="OK",e.BAN="Access denied",e.NOT_FOUND="Not found",e.USER_NOT_FOUND="User not found",e.CHECK_FAIL="Condition is not satisfied",e.REQ_EXCEPTION="Request exception",e.MISSING_BODY="Missing request body",e.MISSING_PARAM="Missing request parameters",e.PASSWORD_ERROR="Password error",e.UNAUTHORIZED="Unauthorized access",e.AUTH_EXPIRED="Authorization expiration",e.ILLEGAL_ACCESS="Illegal access",e.USER_EXIST="User already exists",e.RULE_EXIST="Rule already exists",e.MODIFY_FAIL="Modification failed"})(m||(m={}));var _=n(73310),p={timer:void 0,visible:!1};function j(e,u){u!=null&&u.silentError||p.visible||(p.visible=!0,clearTimeout(p.timer),_.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||(e instanceof Error?e.name||e.message:"Request Error")}),p.timer=window.setTimeout(function(){p.visible=!1},3e3))}function W(e,u){[A.UNAUTHORIZED,A.AUTH_EXPIRED,A.ILLEGAL_ACCESS].includes(e.code)&&(E.y$.removeStorage(R.P.TOKEN),E.y$.removeStorage(R.P.USER),N.m8.replace("/login")),!p.visible&&!(u!=null&&u.silentBusinessError)&&(p.visible=!0,clearTimeout(p.timer),_.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||e.message||"Business Exception"}),p.timer=window.setTimeout(function(){p.visible=!1},3e3))}function U(e,u,v,y){var B=new AbortController,X=E.y$.getStorage(R.P.TOKEN),b=new Headers(i()({"Content-Type":"application/json","trace-id":(0,l.x0)()},y==null?void 0:y.headers));X&&b.set("Authorization",X);var Y=i()({method:e,headers:b,signal:B.signal},y);v&&(Y.body=JSON.stringify(v));var J=function(){return fetch(u,Y).then(function(h){return h.json()}).then(function(h){return h.success||W(h,y),h}).catch(function(h){return j(h,y),{code:h==null?void 0:h.code,message:"",success:!1,data:null}})};return{req:J,abortController:B}}function M(e,u,v){var y=new URLSearchParams(u),B=e.includes("?")?"&":"?";return U("GET","".concat(e).concat(B).concat(y),void 0,v)}function K(e,u,v){return U("POST",e,u,v)}function x(e,u,v){return U("DELETE",e,u,v)}function F(e,u,v){return U("PATCH",e,u,v)}function I(e,u,v){return U("PUT",e,u,v)}function o(e,u,v){return U("OPTIONS",e,u,v)}var t={get:M,post:K,put:I,patch:F,delete:x,options:o},r=t;function s(e){return r.post("/__internal/api/user/login",e)}function d(){return r.get("/__internal/api/rule/all")}function a(e){return request.get("/__internal/api/rule/prefix",{prefix:e})}function f(e,u){return r.post("/__internal/api/rule/modify",{prefix:e,next:u})}function S(e){return r.post("/__internal/api/rule/add",e)}function O(e){return r.delete("/__internal/api/rule/remove",{prefix:e})}},19931:function(P,g,n){n.d(g,{Hg:function(){return K},JP:function(){return x},nr:function(){return F},y$:function(){return A}});var c=n(86093),i=n.n(c),N=n(324),R=n.n(N),E=n(80828),l=n.n(E),A=function(){function o(){R()(this,o)}return l()(o,null,[{key:"getStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;if(d){var a=d.getItem(r);if(a){if(a.indexOf("obj-")===0)return a=a.slice(4),JSON.parse(a);if(a.indexOf("str-")===0)return a.slice(4)}}}},{key:"setStorage",value:function(r,s){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var a=s;i()(a)==="object"?(a=JSON.stringify(a),a="obj-"+a):a="str-"+a;var f=d;f&&f.setItem(r,a)}}},{key:"removeStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;d&&r&&d.removeItem(r)}},{key:"clearStorage",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=r;s&&s.clear()}},{key:"getSession",value:function(r){return this.getStorage(r,sessionStorage)}},{key:"setSession",value:function(r,s){this.setStorage(r,s,sessionStorage)}},{key:"removeSession",value:function(r){this.removeStorage(r,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),o}();function m(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),r=document.createElement("style");r.id=t;var s=document.createTextNode(o);return r.appendChild(s),document.head.appendChild(r),r}function _(o){if(typeof o=="string"){var t=document.head.querySelector("#".concat(o));t==null||t.remove()}else{var r;o==null||(r=o.remove)===null||r===void 0||r.call(o)}}function p(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,f;if(!(s!=null&&(a=s.classList)!==null&&a!==void 0&&(f=a.contains)!==null&&f!==void 0&&f.call(a,d))){var S,O;s==null||(S=s.classList)===null||S===void 0||(O=S.add)===null||O===void 0||O.call(S,d)}})}function j(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,f;s!=null&&(a=s.classList)!==null&&a!==void 0&&(f=a.contains)!==null&&f!==void 0&&f.call(a,d)&&s.classList.remove(d)})}function W(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,f;if(s!=null&&(a=s.classList)!==null&&a!==void 0&&(f=a.contains)!==null&&f!==void 0&&f.call(a,d))s.classList.remove(d);else{var S,O;s==null||(S=s.classList)===null||S===void 0||(O=S.add)===null||O===void 0||O.call(S,d)}})}var U=function(t,r){return typeof t=="function"?t.apply(null,r):void 0};function M(o,t,r){try{return U(o,t)}catch(s){U(r,[s])}}var K=function(t,r){try{return JSON.parse(t,r)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},x=function(t,r,s){return(typeof t=="function"?t():t)?r:s},F=function(t,r){return x(t,r,null)};function I(o){var t=o.trim().toLocaleLowerCase();return t.replace(t[0],t[0].toUpperCase())}},73310:function(P,g,n){n.d(g,{t:function(){return R}});var c=n(92951),i=n.n(c),N=n(10947);i().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var R={success:function(l){return i().success(l.description,l.message)},info:function(l){return i().info(l.description,l.message)},warning:function(l){return i().warning(l.description,l.message)},error:function(l){return i().error(l.description,l.message)}}}}]);
