"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[939],{88031:function(P,m,n){n.d(m,{P:function(){return f}});var f=function(i){return i.TOKEN="_|see_what_see|__|-_-||__",i.USER="_|see_what_see|__|-_-|__",i}({})},28666:function(P,m,n){n.d(m,{$G:function(){return L},YG:function(){return l},rS:function(){return p}});var f=n(19931),i=n(88031),N=n(73310),R=n(93321),p={token:{borderRadius:2}};function l(E){f.y$.setStorage(i.P.USER,E.name),f.y$.setStorage(i.P.TOKEN,E.token),N.t.success({message:"".concat(E.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),R.m8.push("/home")}function L(){f.y$.removeStorage(i.P.USER),f.y$.removeStorage(i.P.TOKEN),R.m8.replace("/login")}},61985:function(P,m,n){n.d(m,{a:function(){return N}});var f=n(88031),i=n(19931);function N(){return{isLogin:i.y$.getStorage(f.P.USER)}}},31591:function(P,m,n){n.r(m),n.d(m,{default:function(){return s}});var f=n(12323),i=n.n(f),N=n(63260),R=n.n(N),p=n(87329),l=n.n(p),L=n(42035),E=n.n(L),g=n(2784),_=n(72779),D=n.n(_),W=n.p+"static/logo.5376c493.png",A=n(24994),F=n(14053),K=n(52166),M=n(61985),x=n(93321),I={"login-page":"login-page___k7G33",cover:"cover___Tegwf","cover-close":"cover-close___Xp_zY",logo:"logo___GKoHn",divider:"divider___l4jgJ","divider-open":"divider-open___CKvP9",panel:"panel___z51j4",input:"input___OHY6b","input-open":"input-open___YQTpO"},a=n(28666),t=n(52322),r=function(o){(0,M.a)().isLogin&&x.m8.back();var c=(0,g.useState)(!1),S=E()(c,2),U=S[0],e=S[1],u=(0,g.useState)(!1),v=E()(u,2),O=v[0],j=v[1],X=(0,g.useState)(!1),b=E()(X,2),Y=b[0],J=b[1],Q=(0,g.useState)(!1),h=E()(Q,2),V=h[0],k=h[1],oe=(0,g.useState)(!1),T=E()(oe,2),q=T[0],H=T[1],ue=D()([I.divider,l()({},I["divider-open"],U)]),ee=D()([I.input,l()({},I["input-open"],O)]),ie=D()([I.cover,l()({},I["cover-close"],Y)]),le=function(){J(!0)},de=function(){J(!1)},ce=(0,g.useState)(),ne=E()(ce,2),Z=ne[0],ve=ne[1],fe=(0,g.useState)(),te=E()(fe,2),$=te[0],me=te[1],re=(0,g.useRef)(null),se=(0,g.useRef)(null),ge=function(y){ve(y.target.value),V&&k(!1)},Se=function(y){me(y.target.value),q&&H(!1)},ae=function(){var B=R()(i()().mark(function y(){var z,G,w;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(Z){C.next=4;break}return(z=re.current)===null||z===void 0||z.focus({cursor:"end"}),k(!0),C.abrupt("return");case 4:if($){C.next=8;break}return(G=se.current)===null||G===void 0||G.focus({cursor:"end"}),H(!0),C.abrupt("return");case 8:return C.next=10,(0,K.x4)({name:Z,password:$}).req();case 10:w=C.sent,w!=null&&w.data&&(0,a.YG)(w.data);case 12:case"end":return C.stop()}},y)}));return function(){return B.apply(this,arguments)}}(),pe=function(y){y.key.toLocaleUpperCase()==="ENTER"&&ae()};return g.useEffect(function(){var B=setTimeout(function(){e(!0)},100),y=setTimeout(function(){j(!0)},500);return function(){clearTimeout(B),clearTimeout(y)}},[]),(0,t.jsx)("div",{className:I["login-page"],children:(0,t.jsxs)("div",{className:ie,children:[(0,t.jsx)("img",{src:W,alt:"logo",className:I.logo,onClick:ae}),(0,t.jsx)("div",{className:ue}),(0,t.jsxs)("div",{className:I.panel,children:[(0,t.jsx)(F.Z,{className:ee,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",prefix:(0,t.jsx)(A.Z,{}),value:Z,onInput:ge,ref:re,status:V?"error":void 0}),(0,t.jsx)(F.Z.Password,{className:ee,onFocus:le,onBlur:de,placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:$,onInput:Se,onKeyDownCapture:pe,ref:se,status:q?"error":void 0})]})]})})},s=r},52166:function(P,m,n){n.d(m,{HP:function(){return S},UY:function(){return d},x4:function(){return s},pI:function(){return c},DV:function(){return U}});var f=n(13311),i=n.n(f),N=n(93321),R=n(88031),p=n(19931),l=n(37164),L=function(e){return e[e.OK=200]="OK",e[e.BAN=401]="BAN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.USER_NOT_FOUND=4040]="USER_NOT_FOUND",e[e.CHECK_FAIL=405]="CHECK_FAIL",e[e.REQ_EXCEPTION=406]="REQ_EXCEPTION",e[e.MISSING_BODY=407]="MISSING_BODY",e[e.MISSING_PARAM=408]="MISSING_PARAM",e[e.PASSWORD_ERROR=409]="PASSWORD_ERROR",e[e.UNAUTHORIZED=410]="UNAUTHORIZED",e[e.AUTH_EXPIRED=411]="AUTH_EXPIRED",e[e.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS",e[e.USER_EXIST=413]="USER_EXIST",e[e.RULE_EXIST=414]="RULE_EXIST",e[e.MODIFY_FAIL=415]="MODIFY_FAIL",e}({}),E=function(e){return e.OK="OK",e.BAN="Access denied",e.NOT_FOUND="Not found",e.USER_NOT_FOUND="User not found",e.CHECK_FAIL="Condition is not satisfied",e.REQ_EXCEPTION="Request exception",e.MISSING_BODY="Missing request body",e.MISSING_PARAM="Missing request parameters",e.PASSWORD_ERROR="Password error",e.UNAUTHORIZED="Unauthorized access",e.AUTH_EXPIRED="Authorization expiration",e.ILLEGAL_ACCESS="Illegal access",e.USER_EXIST="User already exists",e.RULE_EXIST="Rule already exists",e.MODIFY_FAIL="Modification failed",e}({}),g=n(73310),_={timer:void 0,visible:!1};function D(e,u){u!=null&&u.silentError||_.visible||(_.visible=!0,clearTimeout(_.timer),g.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||(e instanceof Error?e.name||e.message:"Request Error")}),_.timer=window.setTimeout(function(){_.visible=!1},3e3))}function W(e,u){[L.UNAUTHORIZED,L.AUTH_EXPIRED,L.ILLEGAL_ACCESS].includes(e.code)&&(p.y$.removeStorage(R.P.TOKEN),p.y$.removeStorage(R.P.USER),N.m8.replace("/login")),!_.visible&&!(u!=null&&u.silentBusinessError)&&(_.visible=!0,clearTimeout(_.timer),g.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||e.message||"Business Exception"}),_.timer=window.setTimeout(function(){_.visible=!1},3e3))}function A(e,u,v,O){var j=new AbortController,X=p.y$.getStorage(R.P.TOKEN),b=new Headers(i()({"Content-Type":"application/json","trace-id":(0,l.x0)()},O==null?void 0:O.headers));X&&b.set("Authorization",X);var Y=i()({method:e,headers:b,signal:j.signal},O);v&&(Y.body=JSON.stringify(v));var J=function(){return fetch(u,Y).then(function(h){return h.json()}).then(function(h){return h.success||W(h,O),h}).catch(function(h){return D(h,O),{code:h==null?void 0:h.code,message:"",success:!1,data:null}})};return{req:J,abortController:j}}function F(e,u,v){var O=new URLSearchParams(u),j=e.includes("?")?"&":"?";return A("GET","".concat(e).concat(j).concat(O),void 0,v)}function K(e,u,v){return A("POST",e,u,v)}function M(e,u,v){return A("DELETE",e,u,v)}function x(e,u,v){return A("PATCH",e,u,v)}function I(e,u,v){return A("PUT",e,u,v)}function a(e,u,v){return A("OPTIONS",e,u,v)}var t={get:F,post:K,put:I,patch:x,delete:M,options:a},r=t;function s(e){return r.post("/__internal/api/user/login",e)}function d(){return r.get("/__internal/api/rule/all")}function o(e){return request.get("/__internal/api/rule/prefix",{prefix:e})}function c(e,u){return r.post("/__internal/api/rule/modify",{prefix:e,next:u})}function S(e){return r.post("/__internal/api/rule/add",e)}function U(e){return r.delete("/__internal/api/rule/remove",{prefix:e})}},19931:function(P,m,n){n.d(m,{Hg:function(){return K},JP:function(){return M},nr:function(){return x},y$:function(){return L}});var f=n(86093),i=n.n(f),N=n(324),R=n.n(N),p=n(80828),l=n.n(p),L=function(){function a(){R()(this,a)}return l()(a,null,[{key:"getStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;if(d){var o=d.getItem(r);if(o){if(o.indexOf("obj-")===0)return o=o.slice(4),JSON.parse(o);if(o.indexOf("str-")===0)return o.slice(4)}}}},{key:"setStorage",value:function(r,s){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var o=s;i()(o)==="object"?(o=JSON.stringify(o),o="obj-"+o):o="str-"+o;var c=d;c&&c.setItem(r,o)}}},{key:"removeStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;d&&r&&d.removeItem(r)}},{key:"clearStorage",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=r;s&&s.clear()}},{key:"getSession",value:function(r){return this.getStorage(r,sessionStorage)}},{key:"setSession",value:function(r,s){this.setStorage(r,s,sessionStorage)}},{key:"removeSession",value:function(r){this.removeStorage(r,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),a}();function E(a){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),r=document.createElement("style");r.id=t;var s=document.createTextNode(a);return r.appendChild(s),document.head.appendChild(r),r}function g(a){if(typeof a=="string"){var t=document.head.querySelector("#".concat(a));t==null||t.remove()}else{var r;a==null||(r=a.remove)===null||r===void 0||r.call(a)}}function _(a,t){var r=Array.isArray(t)?t:[t],s=typeof a=="string"?document.querySelector(a):a;s&&r.forEach(function(d){var o,c;if(!(s!=null&&(o=s.classList)!==null&&o!==void 0&&(c=o.contains)!==null&&c!==void 0&&c.call(o,d))){var S,U;s==null||(S=s.classList)===null||S===void 0||(U=S.add)===null||U===void 0||U.call(S,d)}})}function D(a,t){var r=Array.isArray(t)?t:[t],s=typeof a=="string"?document.querySelector(a):a;s&&r.forEach(function(d){var o,c;s!=null&&(o=s.classList)!==null&&o!==void 0&&(c=o.contains)!==null&&c!==void 0&&c.call(o,d)&&s.classList.remove(d)})}function W(a,t){var r=Array.isArray(t)?t:[t],s=typeof a=="string"?document.querySelector(a):a;s&&r.forEach(function(d){var o,c;if(s!=null&&(o=s.classList)!==null&&o!==void 0&&(c=o.contains)!==null&&c!==void 0&&c.call(o,d))s.classList.remove(d);else{var S,U;s==null||(S=s.classList)===null||S===void 0||(U=S.add)===null||U===void 0||U.call(S,d)}})}var A=function(t,r){return typeof t=="function"?t.apply(null,r):void 0};function F(a,t,r){try{return A(a,t)}catch(s){A(r,[s])}}var K=function(t,r){try{return JSON.parse(t,r)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},M=function(t,r,s){return(typeof t=="function"?t():t)?r:s},x=function(t,r){return M(t,r,null)};function I(a){var t=a.trim().toLocaleLowerCase();return t.replace(t[0],t[0].toUpperCase())}},73310:function(P,m,n){n.d(m,{t:function(){return R}});var f=n(92951),i=n.n(f),N=n(10947);i().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var R={success:function(l){return i().success(l.description,l.message)},info:function(l){return i().info(l.description,l.message)},warning:function(l){return i().warning(l.description,l.message)},error:function(l){return i().error(l.description,l.message)}}}}]);
