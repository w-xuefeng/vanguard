"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[939],{88031:function(L,m,n){n.d(m,{P:function(){return d}});var d;(function(i){i.TOKEN="_|see_what_see|__|-_-||__",i.USER="_|see_what_see|__|-_-|__"})(d||(d={}))},28666:function(L,m,n){n.d(m,{$G:function(){return O},YG:function(){return l},rS:function(){return p}});var d=n(19931),i=n(88031),N=n(73310),R=n(63875),p={token:{borderRadius:2}};function l(g){d.y$.setStorage(i.P.USER,g.name),d.y$.setStorage(i.P.TOKEN,g.token),N.t.success({message:"".concat(g.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),R.m8.push("/home")}function O(){d.y$.removeStorage(i.P.USER),d.y$.removeStorage(i.P.TOKEN),R.m8.replace("/login")}},61985:function(L,m,n){n.d(m,{a:function(){return N}});var d=n(88031),i=n(19931);function N(){return{isLogin:i.y$.getStorage(d.P.USER)}}},31591:function(L,m,n){n.r(m),n.d(m,{default:function(){return s}});var d=n(27609),i=n.n(d),N=n(91461),R=n.n(N),p=n(26290),l=n.n(p),O=n(43681),g=n.n(O),S=n(2784),_=n(72779),B=n.n(_),b=n.p+"static/logo.5376c493.png",I=n(24994),x=n(14053),K=n(52166),j=n(61985),F=n(63875),A={"login-page":"login-page___k7G33",cover:"cover___Tegwf","cover-close":"cover-close___Xp_zY",logo:"logo___GKoHn",divider:"divider___l4jgJ","divider-open":"divider-open___CKvP9",panel:"panel___z51j4",input:"input___OHY6b","input-open":"input-open___YQTpO"},o=n(28666),t=n(52322),r=function(a){(0,j.a)().isLogin&&F.m8.back();var v=(0,S.useState)(!1),E=g()(v,2),U=E[0],e=E[1],u=(0,S.useState)(!1),f=g()(u,2),y=f[0],M=f[1],G=(0,S.useState)(!1),w=g()(G,2),Y=w[0],J=w[1],Q=(0,S.useState)(!1),h=g()(Q,2),V=h[0],T=h[1],ae=(0,S.useState)(!1),k=g()(ae,2),H=k[0],q=k[1],ue=B()([A.divider,l()({},A["divider-open"],U)]),ee=B()([A.input,l()({},A["input-open"],y)]),ie=B()([A.cover,l()({},A["cover-close"],Y)]),le=function(){J(!0)},ce=function(){J(!1)},de=(0,S.useState)(),ne=g()(de,2),X=ne[0],ve=ne[1],fe=(0,S.useState)(),te=g()(fe,2),Z=te[0],ge=te[1],re=(0,S.useRef)(null),se=(0,S.useRef)(null),me=function(C){ve(C.target.value),V&&T(!1)},Se=function(C){ge(C.target.value),H&&q(!1)},oe=function(){var P=R()(i()().mark(function C(){var $,z,W;return i()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:if(X){D.next=4;break}return($=re.current)===null||$===void 0||$.focus({cursor:"end"}),T(!0),D.abrupt("return");case 4:if(Z){D.next=8;break}return(z=se.current)===null||z===void 0||z.focus({cursor:"end"}),q(!0),D.abrupt("return");case 8:return D.next=10,(0,K.x4)({name:X,password:Z}).req();case 10:W=D.sent,W!=null&&W.data&&(0,o.YG)(W.data);case 12:case"end":return D.stop()}},C)}));return function(){return P.apply(this,arguments)}}(),Ee=function(C){C.key.toLocaleUpperCase()==="ENTER"&&oe()};return S.useEffect(function(){var P=setTimeout(function(){e(!0)},100),C=setTimeout(function(){M(!0)},500);return function(){clearTimeout(P),clearTimeout(C)}},[]),(0,t.jsx)("div",{className:A["login-page"],children:(0,t.jsxs)("div",{className:ie,children:[(0,t.jsx)("img",{src:b,alt:"logo",className:A.logo,onClick:oe}),(0,t.jsx)("div",{className:ue}),(0,t.jsxs)("div",{className:A.panel,children:[(0,t.jsx)(x.Z,{className:ee,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",prefix:(0,t.jsx)(I.Z,{}),value:X,onInput:me,ref:re,status:V?"error":void 0}),(0,t.jsx)(x.Z.Password,{className:ee,onFocus:le,onBlur:ce,placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:Z,onInput:Se,onKeyDownCapture:Ee,ref:se,status:H?"error":void 0})]})]})})},s=r},52166:function(L,m,n){n.d(m,{HP:function(){return E},UY:function(){return c},x4:function(){return s},pI:function(){return v},DV:function(){return U}});var d=n(814),i=n.n(d),N=n(63875),R=n(88031),p=n(19931),l=n(37164),O;(function(e){e[e.OK=200]="OK",e[e.BAN=401]="BAN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.USER_NOT_FOUND=4040]="USER_NOT_FOUND",e[e.CHECK_FAIL=405]="CHECK_FAIL",e[e.REQ_EXCEPTION=406]="REQ_EXCEPTION",e[e.MISSING_BODY=407]="MISSING_BODY",e[e.MISSING_PARAM=408]="MISSING_PARAM",e[e.PASSWORD_ERROR=409]="PASSWORD_ERROR",e[e.UNAUTHORIZED=410]="UNAUTHORIZED",e[e.AUTH_EXPIRED=411]="AUTH_EXPIRED",e[e.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS"})(O||(O={}));var g;(function(e){e.OK="OK",e.BAN="Access denied",e.NOT_FOUND="Not found",e.USER_NOT_FOUND="User not found",e.CHECK_FAIL="Condition is not satisfied",e.REQ_EXCEPTION="Request exception",e.MISSING_BODY="Missing request body",e.MISSING_PARAM="Missing request parameters",e.PASSWORD_ERROR="Password error",e.UNAUTHORIZED="Unauthorized access",e.AUTH_EXPIRED="Authorization expiration",e.ILLEGAL_ACCESS="Illegal access"})(g||(g={}));var S=n(73310),_={timer:void 0,visible:!1};function B(e,u){u!=null&&u.silentError||_.visible||(_.visible=!0,clearTimeout(_.timer),S.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||(e instanceof Error?e.name||e.message:"Request Error")}),_.timer=window.setTimeout(function(){_.visible=!1},3e3))}function b(e,u){[O.UNAUTHORIZED,O.AUTH_EXPIRED,O.ILLEGAL_ACCESS].includes(e.code)&&(p.y$.removeStorage(R.P.TOKEN),p.y$.removeStorage(R.P.USER),N.m8.replace("/login")),!_.visible&&!(u!=null&&u.silentBusinessError)&&(_.visible=!0,clearTimeout(_.timer),S.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||e.message||"Business Exception"}),_.timer=window.setTimeout(function(){_.visible=!1},3e3))}function I(e,u,f,y){var M=new AbortController,G=p.y$.getStorage(R.P.TOKEN),w=new Headers(i()({"Content-Type":"application/json","trace-id":(0,l.x0)()},y==null?void 0:y.headers));G&&w.set("Authorization",G);var Y=i()({method:e,headers:w,signal:M.signal},y);f&&(Y.body=JSON.stringify(f));var J=function(){return fetch(u,Y).then(function(h){return h.json()}).then(function(h){return h.success||b(h,y),h}).catch(function(h){return B(h,y),{code:h==null?void 0:h.code,message:"",success:!1,data:null}})};return{req:J,abortController:M}}function x(e,u,f){var y=new URLSearchParams(u),M=e.includes("?")?"&":"?";return I("GET","".concat(e).concat(M).concat(y),void 0,f)}function K(e,u,f){return I("POST",e,u,f)}function j(e,u,f){return I("DELETE",e,u,f)}function F(e,u,f){return I("PATCH",e,u,f)}function A(e,u,f){return I("PUT",e,u,f)}function o(e,u,f){return I("OPTIONS",e,u,f)}var t={get:x,post:K,put:A,patch:F,delete:j,options:o},r=t;function s(e){return r.post("/__internal/api/user/login",e)}function c(){return r.get("/__internal/api/rule/all")}function a(e){return request.get("/__internal/api/rule/prefix",{prefix:e})}function v(e,u){return r.post("/__internal/api/rule/modify",{prefix:e,next:u})}function E(e){return r.post("/__internal/api/rule/add",e)}function U(e){return r.delete("/__internal/api/rule/remove",{prefix:e})}},19931:function(L,m,n){n.d(m,{Hg:function(){return K},nr:function(){return F},y$:function(){return O}});var d=n(67425),i=n.n(d),N=n(53100),R=n.n(N),p=n(98870),l=n.n(p),O=function(){function o(){R()(this,o)}return l()(o,null,[{key:"getStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;if(c){var a=c.getItem(r);if(a){if(a.indexOf("obj-")===0)return a=a.slice(4),JSON.parse(a);if(a.indexOf("str-")===0)return a.slice(4)}}}},{key:"setStorage",value:function(r,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var a=s;i()(a)==="object"?(a=JSON.stringify(a),a="obj-"+a):a="str-"+a;var v=c;v&&v.setItem(r,a)}}},{key:"removeStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;c&&r&&c.removeItem(r)}},{key:"clearStorage",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=r;s&&s.clear()}},{key:"getSession",value:function(r){return this.getStorage(r,sessionStorage)}},{key:"setSession",value:function(r,s){this.setStorage(r,s,sessionStorage)}},{key:"removeSession",value:function(r){this.removeStorage(r,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),o}();function g(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),r=document.createElement("style");r.id=t;var s=document.createTextNode(o);return r.appendChild(s),document.head.appendChild(r),r}function S(o){if(typeof o=="string"){var t=document.head.querySelector("#".concat(o));t==null||t.remove()}else{var r;o==null||(r=o.remove)===null||r===void 0||r.call(o)}}function _(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(c){var a,v;if(!(s!=null&&(a=s.classList)!==null&&a!==void 0&&(v=a.contains)!==null&&v!==void 0&&v.call(a,c))){var E,U;s==null||(E=s.classList)===null||E===void 0||(U=E.add)===null||U===void 0||U.call(E,c)}})}function B(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(c){var a,v;s!=null&&(a=s.classList)!==null&&a!==void 0&&(v=a.contains)!==null&&v!==void 0&&v.call(a,c)&&s.classList.remove(c)})}function b(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(c){var a,v;if(s!=null&&(a=s.classList)!==null&&a!==void 0&&(v=a.contains)!==null&&v!==void 0&&v.call(a,c))s.classList.remove(c);else{var E,U;s==null||(E=s.classList)===null||E===void 0||(U=E.add)===null||U===void 0||U.call(E,c)}})}var I=function(t,r){return typeof t=="function"?t.apply(null,r):void 0};function x(o,t,r){try{return I(o,t)}catch(s){I(r,[s])}}var K=function(t,r){try{return JSON.parse(t,r)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},j=function(t,r,s){return(typeof t=="function"?t():t)?r:s},F=function(t,r){return j(t,r,null)};function A(o){var t=o.trim().toLocaleLowerCase();return t.replace(t[0],t[0].toUpperCase())}},73310:function(L,m,n){n.d(m,{t:function(){return R}});var d=n(92951),i=n.n(d),N=n(10947);i().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var R={success:function(l){return i().success(l.description,l.message)},info:function(l){return i().info(l.description,l.message)},warning:function(l){return i().warning(l.description,l.message)},error:function(l){return i().error(l.description,l.message)}}}}]);
