"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[939],{88031:function(j,m,n){n.d(m,{P:function(){return v}});var v=function(i){return i.TOKEN="_|see_what_see|__|-_-||__",i.USER="_|see_what_see|__|-_-|__",i}({})},28666:function(j,m,n){n.d(m,{$G:function(){return L},YG:function(){return l},rS:function(){return S}});var v=n(19931),i=n(88031),N=n(73310),R=n(93321),S={token:{borderRadius:2}};function l(p){v.y$.setStorage(i.P.USER,p.name),v.y$.setStorage(i.P.TOKEN,p.token),N.t.success({message:"".concat(p.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),R.m8.push("/home")}function L(){v.y$.removeStorage(i.P.USER),v.y$.removeStorage(i.P.TOKEN),R.m8.replace("/login")}},61985:function(j,m,n){n.d(m,{a:function(){return N}});var v=n(88031),i=n(19931);function N(){return{isLogin:i.y$.getStorage(v.P.USER)}}},31591:function(j,m,n){n.r(m),n.d(m,{default:function(){return s}});var v=n(12323),i=n.n(v),N=n(63260),R=n.n(N),S=n(87329),l=n.n(S),L=n(42035),p=n.n(L),g=n(2784),E=n(72779),x=n.n(E),W=n.p+"static/logo.5376c493.png",A=n(24994),M=n(14053),F=n(52166),B=n(61985),K=n(93321),I={"login-page":"login-page___k7G33",cover:"cover___Tegwf","cover-close":"cover-close___Xp_zY",logo:"logo___GKoHn",divider:"divider___l4jgJ","divider-open":"divider-open___CKvP9",panel:"panel___z51j4",input:"input___OHY6b","input-open":"input-open___YQTpO"},o=n(28666),t=n(52322),r=function(a){(0,B.a)().isLogin&&K.m8.back();var c=(0,g.useState)(!1),_=p()(c,2),U=_[0],e=_[1],u=(0,g.useState)(!1),f=p()(u,2),O=f[0],P=f[1],X=(0,g.useState)(!1),b=p()(X,2),Y=b[0],J=b[1],Q=(0,g.useState)(!1),h=p()(Q,2),V=h[0],k=h[1],ae=(0,g.useState)(!1),T=p()(ae,2),q=T[0],H=T[1],ue=x()([I.divider,l()({},I["divider-open"],U)]),ee=x()([I.input,l()({},I["input-open"],O)]),ie=x()([I.cover,l()({},I["cover-close"],Y)]),le=function(){J(!0)},de=function(){J(!1)},ce=(0,g.useState)(),ne=p()(ce,2),Z=ne[0],fe=ne[1],ve=(0,g.useState)(),te=p()(ve,2),$=te[0],me=te[1],re=(0,g.useRef)(null),se=(0,g.useRef)(null),ge=function(y){fe(y.target.value),V&&k(!1)},_e=function(y){me(y.target.value),q&&H(!1)},oe=function(){var D=R()(i()().mark(function y(){var z,G,w;return i()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(Z){C.next=4;break}return(z=re.current)===null||z===void 0||z.focus({cursor:"end"}),k(!0),C.abrupt("return");case 4:if($){C.next=8;break}return(G=se.current)===null||G===void 0||G.focus({cursor:"end"}),H(!0),C.abrupt("return");case 8:return C.next=10,(0,F.x4)({name:Z,password:$}).req();case 10:w=C.sent,w!=null&&w.data&&(0,o.YG)(w.data);case 12:case"end":return C.stop()}},y)}));return function(){return D.apply(this,arguments)}}(),Se=function(y){y.key.toLocaleUpperCase()==="ENTER"&&oe()};return g.useEffect(function(){var D=setTimeout(function(){e(!0)},100),y=setTimeout(function(){P(!0)},500);return function(){clearTimeout(D),clearTimeout(y)}},[]),(0,t.jsx)("div",{className:I["login-page"],children:(0,t.jsxs)("div",{className:ie,children:[(0,t.jsx)("img",{src:W,alt:"logo",className:I.logo,onClick:oe}),(0,t.jsx)("div",{className:ue}),(0,t.jsxs)("div",{className:I.panel,children:[(0,t.jsx)(M.Z,{className:ee,placeholder:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",prefix:(0,t.jsx)(A.Z,{}),value:Z,onInput:ge,ref:re,status:V?"error":void 0}),(0,t.jsx)(M.Z.Password,{className:ee,onFocus:le,onBlur:de,placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",value:$,onInput:_e,onKeyDownCapture:Se,ref:se,status:q?"error":void 0})]})]})})},s=r},52166:function(j,m,n){n.d(m,{HP:function(){return _},UY:function(){return d},x4:function(){return s},pI:function(){return c},DV:function(){return U}});var v=n(13311),i=n.n(v),N=n(93321),R=n(88031),S=n(19931),l=n(37164),L=function(e){return e[e.OK=200]="OK",e[e.BAN=401]="BAN",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.USER_NOT_FOUND=4040]="USER_NOT_FOUND",e[e.CHECK_FAIL=405]="CHECK_FAIL",e[e.REQ_EXCEPTION=406]="REQ_EXCEPTION",e[e.MISSING_BODY=407]="MISSING_BODY",e[e.MISSING_PARAM=408]="MISSING_PARAM",e[e.PASSWORD_ERROR=409]="PASSWORD_ERROR",e[e.UNAUTHORIZED=410]="UNAUTHORIZED",e[e.AUTH_EXPIRED=411]="AUTH_EXPIRED",e[e.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS",e[e.USER_EXIST=413]="USER_EXIST",e[e.RULE_EXIST=414]="RULE_EXIST",e[e.MODIFY_FAIL=415]="MODIFY_FAIL",e}({}),p=function(e){return e.OK="OK",e.BAN="Access denied",e.NOT_FOUND="Not found",e.USER_NOT_FOUND="User not found",e.CHECK_FAIL="Condition is not satisfied",e.REQ_EXCEPTION="Request exception",e.MISSING_BODY="Missing request body",e.MISSING_PARAM="Missing request parameters",e.PASSWORD_ERROR="Password error",e.UNAUTHORIZED="Unauthorized access",e.AUTH_EXPIRED="Authorization expiration",e.ILLEGAL_ACCESS="Illegal access",e.USER_EXIST="User already exists",e.RULE_EXIST="Rule already exists",e.MODIFY_FAIL="Modification failed",e}({}),g=n(73310),E={timer:void 0,visible:!1};function x(e,u){u!=null&&u.silentError||E.visible||(E.visible=!0,clearTimeout(E.timer),g.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||(e instanceof Error?e.name||e.message:"Request Error")}),E.timer=window.setTimeout(function(){E.visible=!1},3e3))}function W(e,u){[L.UNAUTHORIZED,L.AUTH_EXPIRED,L.ILLEGAL_ACCESS].includes(e.code)&&(S.y$.removeStorage(R.P.TOKEN),S.y$.removeStorage(R.P.USER),N.m8.replace("/login")),!E.visible&&!(u!=null&&u.silentBusinessError)&&(E.visible=!0,clearTimeout(E.timer),g.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(u==null?void 0:u.customErrorMsg)||e.message||"Business Exception"}),E.timer=window.setTimeout(function(){E.visible=!1},3e3))}function A(e,u,f,O){var P=new AbortController,X=S.y$.getStorage(R.P.TOKEN),b=new Headers(i()({"Content-Type":"application/json","trace-id":(0,l.x0)()},O==null?void 0:O.headers));X&&b.set("Authorization",X);var Y=i()({method:e,headers:b,signal:P.signal},O);f&&(Y.body=JSON.stringify(f));var J=function(){return fetch(u,Y).then(function(h){return h.json()}).then(function(h){return h.success||W(h,O),h}).catch(function(h){return x(h,O),{code:h==null?void 0:h.code,message:"",success:!1,data:null}})};return{req:J,abortController:P}}function M(e,u,f){var O=new URLSearchParams(u),P=e.includes("?")?"&":"?";return A("GET","".concat(e).concat(P).concat(O),void 0,f)}function F(e,u,f){return A("POST",e,u,f)}function B(e,u,f){return A("DELETE",e,u,f)}function K(e,u,f){return A("PATCH",e,u,f)}function I(e,u,f){return A("PUT",e,u,f)}function o(e,u,f){return A("OPTIONS",e,u,f)}var t={get:M,post:F,put:I,patch:K,delete:B,options:o},r=t;function s(e){return r.post("/__internal/api/user/login",e)}function d(){return r.get("/__internal/api/rule/all")}function a(e){return request.get("/__internal/api/rule/prefix",{prefix:e})}function c(e,u){return r.post("/__internal/api/rule/modify",{prefix:e,next:u})}function _(e){return r.post("/__internal/api/rule/add",e)}function U(e){return r.delete("/__internal/api/rule/remove",{prefix:e})}},19931:function(j,m,n){n.d(m,{Hg:function(){return F},JP:function(){return B},nr:function(){return K},y$:function(){return L}});var v=n(86093),i=n.n(v),N=n(324),R=n.n(N),S=n(80828),l=n.n(S),L=function(){function o(){R()(this,o)}return l()(o,null,[{key:"getStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;if(d){var a=d.getItem(r);if(a){if(a.indexOf("obj-")===0)return a=a.slice(4),JSON.parse(a);if(a.indexOf("str-")===0)return a.slice(4)}}}},{key:"setStorage",value:function(r,s){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var a=s;i()(a)==="object"?(a=JSON.stringify(a),a="obj-"+a):a="str-"+a;var c=d;c&&c.setItem(r,a)}}},{key:"removeStorage",value:function(r){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,d=s;d&&r&&d.removeItem(r)}},{key:"clearStorage",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=r;s&&s.clear()}},{key:"getSession",value:function(r){return this.getStorage(r,sessionStorage)}},{key:"setSession",value:function(r,s){this.setStorage(r,s,sessionStorage)}},{key:"removeSession",value:function(r){this.removeStorage(r,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),o}();function p(o){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),r=document.createElement("style");r.id=t;var s=document.createTextNode(o);return r.appendChild(s),document.head.appendChild(r),r}function g(o){if(typeof o=="string"){var t=document.head.querySelector("#".concat(o));t==null||t.remove()}else{var r;o==null||(r=o.remove)===null||r===void 0||r.call(o)}}function E(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,c;if(!(s!=null&&(a=s.classList)!==null&&a!==void 0&&(c=a.contains)!==null&&c!==void 0&&c.call(a,d))){var _,U;s==null||(_=s.classList)===null||_===void 0||(U=_.add)===null||U===void 0||U.call(_,d)}})}function x(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,c;s!=null&&(a=s.classList)!==null&&a!==void 0&&(c=a.contains)!==null&&c!==void 0&&c.call(a,d)&&s.classList.remove(d)})}function W(o,t){var r=Array.isArray(t)?t:[t],s=typeof o=="string"?document.querySelector(o):o;s&&r.forEach(function(d){var a,c;if(s!=null&&(a=s.classList)!==null&&a!==void 0&&(c=a.contains)!==null&&c!==void 0&&c.call(a,d))s.classList.remove(d);else{var _,U;s==null||(_=s.classList)===null||_===void 0||(U=_.add)===null||U===void 0||U.call(_,d)}})}var A=function(t,r){return typeof t=="function"?t.apply(null,r):void 0};function M(o,t,r){try{return A(o,t)}catch(s){A(r,[s])}}var F=function(t,r){try{return JSON.parse(t,r)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},B=function(t,r,s){return(typeof t=="function"?t():t)?r:s},K=function(t,r){return B(t,r,null)};function I(o){var t=o.trim().toLocaleLowerCase();return t.replace(t[0],t[0].toUpperCase())}},73310:function(j,m,n){n.d(m,{t:function(){return R}});var v=n(92951),i=n.n(v),N=n(10947);i().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var R={success:function(l){return i().success(l.description,l.message)},info:function(l){return i().info(l.description,l.message)},warning:function(l){return i().warning(l.description,l.message)},error:function(l){return i().error(l.description,l.message)}}}}]);
