"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[512],{88031:function(k,y,n){n.d(y,{P:function(){return g}});var g;(function(d){d.TOKEN="_|see_what_see|__|-_-||__",d.USER="_|see_what_see|__|-_-|__"})(g||(g={}))},28666:function(k,y,n){n.d(y,{$G:function(){return b},YG:function(){return l},rS:function(){return C}});var g=n(19931),d=n(88031),$=n(73310),f=n(93321),C={token:{borderRadius:2}};function l(h){g.y$.setStorage(d.P.USER,h.name),g.y$.setStorage(d.P.TOKEN,h.token),$.t.success({message:"".concat(h.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),f.m8.push("/home")}function b(){g.y$.removeStorage(d.P.USER),g.y$.removeStorage(d.P.TOKEN),f.m8.replace("/login")}},51594:function(k,y,n){n.r(y),n.d(y,{default:function(){return be}});var g=n(87329),d=n.n(g),$=n(12323),f=n.n($),C=n(63260),l=n.n(C),b=n(42035),h=n.n(b),S=n(2784),j=n(72779),ne=n.n(j),E={"rule-card":"rule-card___WaxcT",label:"label___nIS8E",value:"value___yVhR9"},M=n(93411),te=n(76123),H=n(24832),B=n(88926),p=n(37517),ae=n(77138),e=n(52322);function a(U){var v=U.rule,K=U.onClick,G=U.onRemove,z=v.prefix.toLocaleUpperCase();return(0,e.jsx)(M.Z,{title:z,bordered:!1,className:E["rule-card"],extra:(0,e.jsx)(te.Z,{title:"\u5220\u9664\u670D\u52A1",description:"\u4F60\u786E\u5B9A\u8981\u5220\u9664 ".concat(z," \u5417?"),icon:(0,e.jsx)(ae.Z,{style:{color:"red"}}),okText:"\u786E\u5B9A\u5220\u9664",cancelText:"\u53D6\u6D88",onConfirm:G,children:(0,e.jsx)(H.ZP,{type:"link",danger:!0,children:"\u5220\u9664"})}),children:(0,e.jsxs)("div",{onClick:K,children:[(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u524D\u7F00"}),(0,e.jsxs)(p.Z,{className:E.value,span:14,children:["/",v.prefix]})]}),(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u76EE\u6807\u670D\u52A1\u5730\u5740"}),(0,e.jsx)(p.Z,{className:E.value,span:14,children:v.nextOrigin})]}),(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u8BF7\u6C42\u65F6\u662F\u5426\u5FFD\u7565\u524D\u7F00"}),(0,e.jsx)(p.Z,{className:E.value,span:14,children:v.ignorePrefix?"\u5FFD\u7565":"\u4E0D\u5FFD\u7565"})]}),(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u9ED1\u540D\u5355\u6570"}),(0,e.jsx)(p.Z,{className:E.value,span:14,children:v.banList.length})]}),(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u767D\u540D\u5355\u6570"}),(0,e.jsx)(p.Z,{className:E.value,span:14,children:v.pickList.length})]}),(0,e.jsxs)(B.Z,{gutter:16,children:[(0,e.jsx)(p.Z,{className:E.label,span:10,children:"\u6821\u9A8C\u89C4\u5219\u6570"}),(0,e.jsx)(p.Z,{className:E.value,span:14,children:v.checkers.length})]})]})})}var t=n(88133),s=n(62220),c=n(30693),u=n(52166),o={footer:"footer___vsXKH",avatar:"avatar___p4yyW",name:"name___YyFpv",actions:"actions___I0eay","icon-btn":"icon-btn___l_pQk"},m=n(19931),Z=n(88031),r=n(28666),i=n(37588);function R(U){var v=m.y$.getStorage(Z.P.USER),K=U.onCreate;return(0,e.jsxs)("div",{className:o.footer,children:[(0,e.jsx)("div",{className:o.avatar,children:v==null?void 0:v.substring(0,1)}),(0,e.jsx)("div",{className:o.name,children:v}),(0,e.jsxs)("div",{className:o.actions,children:[(0,e.jsx)(i.Z,{className:o["icon-btn"],onClick:K}),(0,e.jsx)("svg",{className:o["icon-btn"],onClick:r.$G,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",children:(0,e.jsx)("path",{d:"M835.669333 554.666667h-473.173333A42.453333 42.453333 0 0 1 320 512a42.666667 42.666667 0 0 1 42.474667-42.666667h473.173333l-161.813333-161.834666a42.666667 42.666667 0 0 1 60.330666-60.330667l234.666667 234.666667a42.666667 42.666667 0 0 1 0 60.330666l-234.666667 234.666667a42.666667 42.666667 0 0 1-60.330666-60.330667L835.669333 554.666667zM554.666667 42.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333C137.578667 128 128 137.578667 128 149.482667v725.034666C128 886.4 137.6 896 149.525333 896H554.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333A106.816 106.816 0 0 1 42.666667 874.517333V149.482667A106.773333 106.773333 0 0 1 149.525333 42.666667H554.666667z"})})]})]})}var F=n(5217),X=n.n(F),se=n(86093),ue=n.n(se),T=n(46342),ie={"editor-container":"editor-container___EDWK_",editor:"editor___hVZKR"},w;function O(U){var v=(0,S.useRef)(null),K,G=function(W){return ue()(W)==="object"?JSON.stringify(W,null,2):W!=null?W:""},z=function(W){var J=X()(W),I;try{for(J.s();!(I=J.n()).done;){var Q=I.value;if(Q.target===v.current){var q,ee=Q.contentRect,Y=ee.width,le=ee.height;(q=w)===null||q===void 0||q.layout({width:Y,height:le})}}}catch(ve){J.e(ve)}finally{J.f()}},oe=function(){K=new ResizeObserver(z),K.observe(v.current)};return(0,S.useEffect)(function(){v.current&&(w=T.editor.create(v.current,{value:G(U.code),theme:"vs-dark",language:"json"}),w.onKeyDown(function(N){(N.ctrlKey||N.metaKey)&&N.keyCode===T.KeyCode.KeyS&&typeof U.onSave=="function"&&(N.preventDefault(),U.onSave())}),oe())},[]),(0,S.useEffect)(function(){var N;(N=w)===null||N===void 0||N.setValue(G(U.code))},[U.code]),(0,e.jsx)("div",{className:ie["editor-container"],children:(0,e.jsx)("div",{className:ie.editor,ref:v})})}var Oe=n(65393),De=n(13569),D={home:"home___gAL5P","card-list":"card-list___w47ZS","card-list-open":"card-list-open___JcHas",empty:"empty___rbXgm",loading:"loading___sQIrB","editor-drawer":"editor-drawer___xQPgG","editor-header":"editor-header___j2l1O","editor-header-left":"editor-header-left___bqPUN","editor-header-right":"editor-header-right___eEgMf","editor-container":"editor-container___HtsXS",saving:"saving___qDL01"},Ue=740,Ie=400,Le={prefix:"new-service-prefix",nextOrigin:"https://example.com:8080",banList:[],pickList:[],checkers:[],ignorePrefix:!1},Pe=function(v){var K,G=S.useState([]),z=h()(G,2),oe=z[0],N=z[1],W=S.useState(),J=h()(W,2),I=J[0],Q=J[1],q=S.useState(!1),ee=h()(q,2),Y=ee[0],le=ee[1],ve=S.useState(!1),ge=h()(ve,2),he=ge[0],Se=ge[1],Me=S.useState(!1),Ee=h()(Me,2),pe=Ee[0],Re=Ee[1],Be=S.useState(!1),_e=h()(Be,2),Ae=_e[0],xe=_e[1],Ze=S.useState(!1),Ce=h()(Ze,2),Fe=Ce[0],je=Ce[1],Ke=t.ZP.useMessage(),Ne=h()(Ke,2),fe=Ne[0],We=Ne[1],$e=function(){xe(!0)},ce=function(){Q(void 0),xe(!1)};function de(){return me.apply(this,arguments)}function me(){return me=l()(f()().mark(function A(){var _;return f()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(!Y){x.next=2;break}return x.abrupt("return");case 2:return le(!0),x.next=5,(0,u.UY)().req();case 5:_=x.sent,_.data&&N(_.data),le(!1);case 8:case"end":return x.stop()}},A)})),me.apply(this,arguments)}var we=function(_){Q(_)},ze=function(){var A=l()(f()().mark(function _(V){var x;return f()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:if(!pe){L.next=2;break}return L.abrupt("return");case 2:return Re(!0),L.next=5,(0,u.DV)(V.prefix).req();case 5:x=L.sent,Re(!1),x.success&&(fe.success("\u670D\u52A1\u5220\u9664\u6210\u529F"),de());case 8:case"end":return L.stop()}},_)}));return function(V){return A.apply(this,arguments)}}(),Je=function(){var _=document.documentElement.clientWidth;return _<=Ue?"100%":"".concat(_-Ie,"px")},ye=function(){var A=l()(f()().mark(function _(){var V,x,re,L;return f()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(V=w==null?void 0:w.getValue(),x=(0,m.Hg)(V),!(!x||he)){P.next=4;break}return P.abrupt("return");case 4:if(Se(!0),!Fe){P.next=12;break}return P.next=8,(0,u.HP)(x).req();case 8:re=P.sent,re!=null&&re.success&&(fe.success("\u65B0\u89C4\u5219\u6DFB\u52A0\u6210\u529F"),je(!1),ce(),de()),P.next=17;break;case 12:if(!I){P.next=17;break}return P.next=15,(0,u.pI)(I.prefix,x).req();case 15:L=P.sent,L!=null&&L.success&&(fe.success("\u89C4\u5219\u4FEE\u6539\u6210\u529F"),ce(),de());case 17:Se(!1);case 18:case"end":return P.stop()}},_)}));return function(){return A.apply(this,arguments)}}(),Xe=function(){je(!0),Q(Le)};return S.useEffect(function(){de()},[]),S.useEffect(function(){I&&$e()},[I]),(0,e.jsxs)("div",{className:D.home,children:[We,(0,e.jsx)(s.Z,{spinning:Y||pe,className:D.loading,children:(0,m.nr)(!Y,(0,m.JP)(oe.length<=0,(0,e.jsx)("div",{className:D.empty,children:"\u7A7A\u7A7A\u5982\u4E5F, \u53EF\u70B9\u51FB\u4E0B\u65B9\u6309\u94AE\u6DFB\u52A0\u670D\u52A1\u54E6\uFF5E"}),(0,e.jsx)("div",{className:ne()(D["card-list"],d()({},D["card-list-open"],Ae)),children:oe.map(function(A){return(0,e.jsx)(a,{onClick:function(){return we(A)},onRemove:function(){return ze(A)},rule:A},A.prefix)})})))}),(0,e.jsx)(c.Z,{rootClassName:D["editor-drawer"],placement:"right",width:Je(),onClose:ce,open:Ae,closable:!1,mask:!1,children:(0,e.jsxs)(s.Z,{spinning:he,className:D.saving,children:[(0,e.jsxs)("div",{className:D["editor-header"],children:[(0,e.jsx)("div",{className:D["editor-header-left"],children:(0,e.jsx)(Oe.Z,{onClick:ce})}),(0,e.jsx)("div",{className:D["editor-title"],children:I==null||(K=I.prefix)===null||K===void 0?void 0:K.toLocaleUpperCase()}),(0,e.jsx)("div",{className:D["editor-header-right"],children:(0,e.jsx)(De.Z,{onClick:ye})})]}),(0,e.jsx)("div",{className:D["editor-container"],children:(0,m.nr)(!Y&&!!I,(0,e.jsx)(O,{code:I,onSave:ye}))})]})}),(0,e.jsx)(R,{onCreate:Xe})]})},be=Pe},52166:function(k,y,n){n.d(y,{HP:function(){return m},UY:function(){return c},x4:function(){return s},pI:function(){return o},DV:function(){return Z}});var g=n(13311),d=n.n(g),$=n(93321),f=n(88031),C=n(19931),l=n(37164),b;(function(r){r[r.OK=200]="OK",r[r.BAN=401]="BAN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.USER_NOT_FOUND=4040]="USER_NOT_FOUND",r[r.CHECK_FAIL=405]="CHECK_FAIL",r[r.REQ_EXCEPTION=406]="REQ_EXCEPTION",r[r.MISSING_BODY=407]="MISSING_BODY",r[r.MISSING_PARAM=408]="MISSING_PARAM",r[r.PASSWORD_ERROR=409]="PASSWORD_ERROR",r[r.UNAUTHORIZED=410]="UNAUTHORIZED",r[r.AUTH_EXPIRED=411]="AUTH_EXPIRED",r[r.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS"})(b||(b={}));var h;(function(r){r.OK="OK",r.BAN="Access denied",r.NOT_FOUND="Not found",r.USER_NOT_FOUND="User not found",r.CHECK_FAIL="Condition is not satisfied",r.REQ_EXCEPTION="Request exception",r.MISSING_BODY="Missing request body",r.MISSING_PARAM="Missing request parameters",r.PASSWORD_ERROR="Password error",r.UNAUTHORIZED="Unauthorized access",r.AUTH_EXPIRED="Authorization expiration",r.ILLEGAL_ACCESS="Illegal access"})(h||(h={}));var S=n(73310),j={timer:void 0,visible:!1};function ne(r,i){i!=null&&i.silentError||j.visible||(j.visible=!0,clearTimeout(j.timer),S.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(i==null?void 0:i.customErrorMsg)||(r instanceof Error?r.name||r.message:"Request Error")}),j.timer=window.setTimeout(function(){j.visible=!1},3e3))}function E(r,i){[b.UNAUTHORIZED,b.AUTH_EXPIRED,b.ILLEGAL_ACCESS].includes(r.code)&&(C.y$.removeStorage(f.P.TOKEN),C.y$.removeStorage(f.P.USER),$.m8.replace("/login")),!j.visible&&!(i!=null&&i.silentBusinessError)&&(j.visible=!0,clearTimeout(j.timer),S.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(i==null?void 0:i.customErrorMsg)||r.message||"Business Exception"}),j.timer=window.setTimeout(function(){j.visible=!1},3e3))}function M(r,i,R,F){var X=new AbortController,se=C.y$.getStorage(f.P.TOKEN),ue=new Headers(d()({"Content-Type":"application/json","trace-id":(0,l.x0)()},F==null?void 0:F.headers));se&&ue.set("Authorization",se);var T=d()({method:r,headers:ue,signal:X.signal},F);R&&(T.body=JSON.stringify(R));var ie=function(){return fetch(i,T).then(function(O){return O.json()}).then(function(O){return O.success||E(O,F),O}).catch(function(O){return ne(O,F),{code:O==null?void 0:O.code,message:"",success:!1,data:null}})};return{req:ie,abortController:X}}function te(r,i,R){var F=new URLSearchParams(i),X=r.includes("?")?"&":"?";return M("GET","".concat(r).concat(X).concat(F),void 0,R)}function H(r,i,R){return M("POST",r,i,R)}function B(r,i,R){return M("DELETE",r,i,R)}function p(r,i,R){return M("PATCH",r,i,R)}function ae(r,i,R){return M("PUT",r,i,R)}function e(r,i,R){return M("OPTIONS",r,i,R)}var a={get:te,post:H,put:ae,patch:p,delete:B,options:e},t=a;function s(r){return t.post("/__internal/api/user/login",r)}function c(){return t.get("/__internal/api/rule/all")}function u(r){return request.get("/__internal/api/rule/prefix",{prefix:r})}function o(r,i){return t.post("/__internal/api/rule/modify",{prefix:r,next:i})}function m(r){return t.post("/__internal/api/rule/add",r)}function Z(r){return t.delete("/__internal/api/rule/remove",{prefix:r})}},19931:function(k,y,n){n.d(y,{Hg:function(){return H},JP:function(){return B},nr:function(){return p},y$:function(){return b}});var g=n(86093),d=n.n(g),$=n(324),f=n.n($),C=n(80828),l=n.n(C),b=function(){function e(){f()(this,e)}return l()(e,null,[{key:"getStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;if(c){var u=c.getItem(t);if(u){if(u.indexOf("obj-")===0)return u=u.slice(4),JSON.parse(u);if(u.indexOf("str-")===0)return u.slice(4)}}}},{key:"setStorage",value:function(t,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var u=s;d()(u)==="object"?(u=JSON.stringify(u),u="obj-"+u):u="str-"+u;var o=c;o&&o.setItem(t,u)}}},{key:"removeStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;c&&t&&c.removeItem(t)}},{key:"clearStorage",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=t;s&&s.clear()}},{key:"getSession",value:function(t){return this.getStorage(t,sessionStorage)}},{key:"setSession",value:function(t,s){this.setStorage(t,s,sessionStorage)}},{key:"removeSession",value:function(t){this.removeStorage(t,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),e}();function h(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),t=document.createElement("style");t.id=a;var s=document.createTextNode(e);return t.appendChild(s),document.head.appendChild(t),t}function S(e){if(typeof e=="string"){var a=document.head.querySelector("#".concat(e));a==null||a.remove()}else{var t;e==null||(t=e.remove)===null||t===void 0||t.call(e)}}function j(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var u,o;if(!(s!=null&&(u=s.classList)!==null&&u!==void 0&&(o=u.contains)!==null&&o!==void 0&&o.call(u,c))){var m,Z;s==null||(m=s.classList)===null||m===void 0||(Z=m.add)===null||Z===void 0||Z.call(m,c)}})}function ne(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var u,o;s!=null&&(u=s.classList)!==null&&u!==void 0&&(o=u.contains)!==null&&o!==void 0&&o.call(u,c)&&s.classList.remove(c)})}function E(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var u,o;if(s!=null&&(u=s.classList)!==null&&u!==void 0&&(o=u.contains)!==null&&o!==void 0&&o.call(u,c))s.classList.remove(c);else{var m,Z;s==null||(m=s.classList)===null||m===void 0||(Z=m.add)===null||Z===void 0||Z.call(m,c)}})}var M=function(a,t){return typeof a=="function"?a.apply(null,t):void 0};function te(e,a,t){try{return M(e,a)}catch(s){M(t,[s])}}var H=function(a,t){try{return JSON.parse(a,t)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},B=function(a,t,s){return(typeof a=="function"?a():a)?t:s},p=function(a,t){return B(a,t,null)};function ae(e){var a=e.trim().toLocaleLowerCase();return a.replace(a[0],a[0].toUpperCase())}},73310:function(k,y,n){n.d(y,{t:function(){return f}});var g=n(92951),d=n.n(g),$=n(10947);d().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var f={success:function(l){return d().success(l.description,l.message)},info:function(l){return d().info(l.description,l.message)},warning:function(l){return d().warning(l.description,l.message)},error:function(l){return d().error(l.description,l.message)}}}}]);
