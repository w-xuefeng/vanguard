"use strict";(self.webpackChunk_vanguard_fe=self.webpackChunk_vanguard_fe||[]).push([[512],{88031:function(k,j,n){n.d(j,{P:function(){return m}});var m;(function(d){d.TOKEN="_|see_what_see|__|-_-||__",d.USER="_|see_what_see|__|-_-|__"})(m||(m={}))},28666:function(k,j,n){n.d(j,{$G:function(){return U},YG:function(){return l},rS:function(){return C}});var m=n(19931),d=n(88031),F=n(73310),f=n(63875),C={token:{borderRadius:2}};function l(S){m.y$.setStorage(d.P.USER,S.name),m.y$.setStorage(d.P.TOKEN,S.token),F.t.success({message:"".concat(S.name,", \u6B22\u8FCE\u56DE\u6765 \u{1F44F}"),description:"\u5F53\u524D\u65F6\u95F4\uFF1A".concat(new Date().toLocaleString())}),f.m8.push("/home")}function U(){m.y$.removeStorage(d.P.USER),m.y$.removeStorage(d.P.TOKEN),f.m8.replace("/login")}},51594:function(k,j,n){n.r(j),n.d(j,{default:function(){return De}});var m=n(26290),d=n.n(m),F=n(27609),f=n.n(F),C=n(91461),l=n.n(C),U=n(43681),S=n.n(U),E=n(2784),N=n(72779),ee=n.n(N),A={"rule-card":"rule-card___WaxcT",label:"label___nIS8E",value:"value___yVhR9"},L=n(93411),re=n(76123),T=n(24832),b=n(88926),x=n(37517),ne=n(77138),e=n(52322);function a(B){var v=B.rule,z=B.onClick,X=B.onRemove,Y=v.prefix.toLocaleUpperCase();return(0,e.jsx)(L.Z,{title:Y,bordered:!1,className:A["rule-card"],extra:(0,e.jsx)(re.Z,{title:"\u5220\u9664\u670D\u52A1",description:"\u4F60\u786E\u5B9A\u8981\u5220\u9664 ".concat(Y," \u5417?"),icon:(0,e.jsx)(ne.Z,{style:{color:"red"}}),okText:"\u786E\u5B9A\u5220\u9664",cancelText:"\u53D6\u6D88",onConfirm:X,children:(0,e.jsx)(T.ZP,{type:"link",danger:!0,children:"\u5220\u9664"})}),children:(0,e.jsxs)("div",{onClick:z,children:[(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(x.Z,{className:A.label,span:10,children:"\u524D\u7F00"}),(0,e.jsxs)(x.Z,{className:A.value,span:14,children:["/",v.prefix]})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(x.Z,{className:A.label,span:10,children:"\u76EE\u6807\u670D\u52A1\u5730\u5740"}),(0,e.jsx)(x.Z,{className:A.value,span:14,children:v.nextOrigin})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(x.Z,{className:A.label,span:10,children:"\u9ED1\u540D\u5355\u6570"}),(0,e.jsx)(x.Z,{className:A.value,span:14,children:v.banList.length})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(x.Z,{className:A.label,span:10,children:"\u767D\u540D\u5355\u6570"}),(0,e.jsx)(x.Z,{className:A.value,span:14,children:v.pickList.length})]}),(0,e.jsxs)(b.Z,{gutter:16,children:[(0,e.jsx)(x.Z,{className:A.label,span:10,children:"\u6821\u9A8C\u89C4\u5219\u6570"}),(0,e.jsx)(x.Z,{className:A.value,span:14,children:v.checkers.length})]})]})})}var t=n(88133),s=n(30693),c=n(62220),o=n(52166),u={footer:"footer___vsXKH",avatar:"avatar___p4yyW",name:"name___YyFpv",actions:"actions___I0eay","icon-btn":"icon-btn___l_pQk"},p=n(19931),M=n(88031),r=n(28666),i=n(37588);function g(B){var v=p.y$.getStorage(M.P.USER),z=B.onCreate;return(0,e.jsxs)("div",{className:u.footer,children:[(0,e.jsx)("div",{className:u.avatar,children:v==null?void 0:v.substring(0,1)}),(0,e.jsx)("div",{className:u.name,children:v}),(0,e.jsxs)("div",{className:u.actions,children:[(0,e.jsx)(i.Z,{className:u["icon-btn"],onClick:z}),(0,e.jsx)("svg",{className:u["icon-btn"],onClick:r.$G,viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",children:(0,e.jsx)("path",{d:"M835.669333 554.666667h-473.173333A42.453333 42.453333 0 0 1 320 512a42.666667 42.666667 0 0 1 42.474667-42.666667h473.173333l-161.813333-161.834666a42.666667 42.666667 0 0 1 60.330666-60.330667l234.666667 234.666667a42.666667 42.666667 0 0 1 0 60.330666l-234.666667 234.666667a42.666667 42.666667 0 0 1-60.330666-60.330667L835.669333 554.666667zM554.666667 42.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333C137.578667 128 128 137.578667 128 149.482667v725.034666C128 886.4 137.6 896 149.525333 896H554.666667a42.666667 42.666667 0 1 1 0 85.333333H149.525333A106.816 106.816 0 0 1 42.666667 874.517333V149.482667A106.773333 106.773333 0 0 1 149.525333 42.666667H554.666667z"})})]})]})}var _=n(38636),G=n.n(_),te=n(67425),ae=n.n(te),se=n(46342),oe={"editor-container":"editor-container___EDWK_",editor:"editor___hVZKR"},$;function y(B){var v=(0,E.useRef)(null),z,X=function(Z){return ae()(Z)==="object"?JSON.stringify(Z,null,2):Z!=null?Z:""},Y=function(Z){var P=G()(Z),Q;try{for(P.s();!(Q=P.n()).done;){var ie=Q.value;if(ie.target===v.current){var V,q=ie.contentRect,H=q.width,ve=q.height;(V=$)===null||V===void 0||V.layout({width:H,height:ve})}}}catch(ue){P.e(ue)}finally{P.f()}},de=function(){z=new ResizeObserver(Y),z.observe(v.current)};return(0,E.useEffect)(function(){return v.current&&($=se.editor.create(v.current,{value:X(B.code),theme:"vs-dark",language:"json"}),de()),function(){var D;(D=$)===null||D===void 0||D.dispose()}},[]),(0,E.useEffect)(function(){var D;(D=$)===null||D===void 0||D.setValue(X(B.code))},[B.code]),(0,e.jsx)("div",{className:oe["editor-container"],children:(0,e.jsx)("div",{className:oe.editor,ref:v})})}var xe=n(65393),Ce=n(13569),w={home:"home___gAL5P","card-list":"card-list___w47ZS","card-list-open":"card-list-open___JcHas","editor-drawer":"editor-drawer___xQPgG","editor-header":"editor-header___j2l1O","editor-container":"editor-container___HtsXS"},Ne=740,Oe=350,je={prefix:"prefix",nextOrigin:"https://example.com:8080",banList:[],pickList:[],checkers:[]},ye=function(v){var z=E.useState([]),X=S()(z,2),Y=X[0],de=X[1],D=E.useState(),Z=S()(D,2),P=Z[0],Q=Z[1],ie=E.useState(!1),V=S()(ie,2),q=V[0],H=V[1],ve=E.useState(!1),ue=S()(ve,2),Ie=ue[0],ge=ue[1],Ue=E.useState(!1),he=S()(Ue,2),Se=he[0],Ee=he[1],Le=E.useState(!1),pe=S()(Le,2),Me=pe[0],Re=pe[1],Pe=t.ZP.useMessage(),Ae=S()(Pe,2),fe=Ae[0],_e=Ae[1],Be=function(){Ee(!0)},le=function(){Q(void 0),Ee(!1)};function ce(){return me.apply(this,arguments)}function me(){return me=l()(f()().mark(function R(){var h,W;return f()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!q){O.next=2;break}return O.abrupt("return");case 2:return H(!0),O.next=5,(0,o.UY)().req();case 5:W=O.sent,(h=W.data)!==null&&h!==void 0&&h.length&&de(W.data),H(!1);case 8:case"end":return O.stop()}},R)})),me.apply(this,arguments)}var Ze=function(h){Q(h)},Ke=function(){var R=l()(f()().mark(function h(W){var J;return f()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return H(!0),K.next=3,(0,o.DV)(W.prefix).req();case 3:J=K.sent,H(!1),J.success&&(ce(),fe.success("\u670D\u52A1\u5220\u9664\u6210\u529F"));case 6:case"end":return K.stop()}},h)}));return function(W){return R.apply(this,arguments)}}(),be=function(){var h=document.documentElement.clientWidth;return h<=Ne?"100%":"".concat(h-Oe,"px")},We=function(){var R=l()(f()().mark(function h(){var W,J,O,K;return f()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(W=$==null?void 0:$.getValue(),J=(0,p.Hg)(W),J){I.next=4;break}return I.abrupt("return");case 4:if(ge(!0),!Me){I.next=12;break}return I.next=8,(0,o.HP)(J).req();case 8:O=I.sent,O!=null&&O.success&&(fe.success("\u65B0\u89C4\u5219\u6DFB\u52A0\u6210\u529F"),Re(!1),le(),ce()),I.next=17;break;case 12:if(!P){I.next=17;break}return I.next=15,(0,o.pI)(P.prefix,J).req();case 15:K=I.sent,K!=null&&K.success&&(fe.success("\u89C4\u5219\u4FEE\u6539\u6210\u529F"),le(),ce());case 17:ge(!1);case 18:case"end":return I.stop()}},h)}));return function(){return R.apply(this,arguments)}}(),Fe=function(){Re(!0),Q(je)};return E.useEffect(function(){ce()},[]),E.useEffect(function(){P&&Be()},[P]),(0,e.jsxs)("div",{className:w.home,children:[_e,(0,e.jsx)("div",{className:ee()(w["card-list"],d()({},w["card-list-open"],Se)),children:Y.map(function(R){return(0,e.jsx)(a,{onClick:function(){return Ze(R)},onRemove:function(){return Ke(R)},rule:R},R.prefix)})}),(0,e.jsx)(s.Z,{rootClassName:w["editor-drawer"],placement:"right",width:be(),onClose:le,open:Se,closable:!1,children:(0,e.jsxs)(c.Z,{tip:"Loading...",spinning:Ie,children:[(0,e.jsxs)("div",{className:w["editor-header"],children:[(0,e.jsx)("div",{className:w["editor-header-left"],children:(0,e.jsx)(xe.Z,{onClick:le})}),(0,e.jsx)("div",{className:w["editor-header-right"],children:(0,e.jsx)(Ce.Z,{onClick:We})})]}),(0,e.jsx)("div",{className:w["editor-container"],children:(0,p.nr)(!q&&!!P,(0,e.jsx)(y,{code:P}))})]})}),(0,e.jsx)(g,{onCreate:Fe})]})},De=ye},52166:function(k,j,n){n.d(j,{HP:function(){return p},UY:function(){return c},x4:function(){return s},pI:function(){return u},DV:function(){return M}});var m=n(814),d=n.n(m),F=n(63875),f=n(88031),C=n(19931),l=n(37164),U;(function(r){r[r.OK=200]="OK",r[r.BAN=401]="BAN",r[r.NOT_FOUND=404]="NOT_FOUND",r[r.USER_NOT_FOUND=4040]="USER_NOT_FOUND",r[r.CHECK_FAIL=405]="CHECK_FAIL",r[r.REQ_EXCEPTION=406]="REQ_EXCEPTION",r[r.MISSING_BODY=407]="MISSING_BODY",r[r.MISSING_PARAM=408]="MISSING_PARAM",r[r.PASSWORD_ERROR=409]="PASSWORD_ERROR",r[r.UNAUTHORIZED=410]="UNAUTHORIZED",r[r.AUTH_EXPIRED=411]="AUTH_EXPIRED",r[r.ILLEGAL_ACCESS=412]="ILLEGAL_ACCESS"})(U||(U={}));var S;(function(r){r.OK="OK",r.BAN="Access denied",r.NOT_FOUND="Not found",r.USER_NOT_FOUND="User not found",r.CHECK_FAIL="Condition is not satisfied",r.REQ_EXCEPTION="Request exception",r.MISSING_BODY="Missing request body",r.MISSING_PARAM="Missing request parameters",r.PASSWORD_ERROR="Password error",r.UNAUTHORIZED="Unauthorized access",r.AUTH_EXPIRED="Authorization expiration",r.ILLEGAL_ACCESS="Illegal access"})(S||(S={}));var E=n(73310),N={timer:void 0,visible:!1};function ee(r,i){i!=null&&i.silentError||N.visible||(N.visible=!0,clearTimeout(N.timer),E.t.error({message:"\u8BF7\u6C42\u5F02\u5E38",description:(i==null?void 0:i.customErrorMsg)||(r instanceof Error?r.name||r.message:"Request Error")}),N.timer=window.setTimeout(function(){N.visible=!1},3e3))}function A(r,i){[U.UNAUTHORIZED,U.AUTH_EXPIRED,U.ILLEGAL_ACCESS].includes(r.code)&&(C.y$.removeStorage(f.P.TOKEN),C.y$.removeStorage(f.P.USER),F.m8.replace("/login")),!N.visible&&!(i!=null&&i.silentBusinessError)&&(N.visible=!0,clearTimeout(N.timer),E.t.error({message:"\u8BF7\u6C42\u4E1A\u52A1\u5F02\u5E38",description:(i==null?void 0:i.customErrorMsg)||r.message||"Business Exception"}),N.timer=window.setTimeout(function(){N.visible=!1},3e3))}function L(r,i,g,_){var G=new AbortController,te=C.y$.getStorage(f.P.TOKEN),ae=new Headers(d()({"Content-Type":"application/json","trace-id":(0,l.x0)()},_==null?void 0:_.headers));te&&ae.set("Authorization",te);var se=d()({method:r,headers:ae,signal:G.signal},_);g&&(se.body=JSON.stringify(g));var oe=function(){return fetch(i,se).then(function(y){return y.json()}).then(function(y){return y.success||A(y,_),y}).catch(function(y){return ee(y,_),{code:y==null?void 0:y.code,message:"",success:!1,data:null}})};return{req:oe,abortController:G}}function re(r,i,g){var _=new URLSearchParams(i),G=r.includes("?")?"&":"?";return L("GET","".concat(r).concat(G).concat(_),void 0,g)}function T(r,i,g){return L("POST",r,i,g)}function b(r,i,g){return L("DELETE",r,i,g)}function x(r,i,g){return L("PATCH",r,i,g)}function ne(r,i,g){return L("PUT",r,i,g)}function e(r,i,g){return L("OPTIONS",r,i,g)}var a={get:re,post:T,put:ne,patch:x,delete:b,options:e},t=a;function s(r){return t.post("/__internal/api/user/login",r)}function c(){return t.get("/__internal/api/rule/all")}function o(r){return request.get("/__internal/api/rule/prefix",{prefix:r})}function u(r,i){return t.post("/__internal/api/rule/modify",{prefix:r,next:i})}function p(r){return t.post("/__internal/api/rule/add",r)}function M(r){return t.delete("/__internal/api/rule/remove",{prefix:r})}},19931:function(k,j,n){n.d(j,{Hg:function(){return T},nr:function(){return x},y$:function(){return U}});var m=n(67425),d=n.n(m),F=n(53100),f=n.n(F),C=n(98870),l=n.n(C),U=function(){function e(){f()(this,e)}return l()(e,null,[{key:"getStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;if(c){var o=c.getItem(t);if(o){if(o.indexOf("obj-")===0)return o=o.slice(4),JSON.parse(o);if(o.indexOf("str-")===0)return o.slice(4)}}}},{key:"setStorage",value:function(t,s){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:localStorage;if([2,3].includes(arguments.length)){var o=s;d()(o)==="object"?(o=JSON.stringify(o),o="obj-"+o):o="str-"+o;var u=c;u&&u.setItem(t,o)}}},{key:"removeStorage",value:function(t){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:localStorage,c=s;c&&t&&c.removeItem(t)}},{key:"clearStorage",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:localStorage,s=t;s&&s.clear()}},{key:"getSession",value:function(t){return this.getStorage(t,sessionStorage)}},{key:"setSession",value:function(t,s){this.setStorage(t,s,sessionStorage)}},{key:"removeSession",value:function(t){this.removeStorage(t,sessionStorage)}},{key:"clearSession",value:function(){this.clearStorage(sessionStorage)}}]),e}();function S(e){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"global-customer-css-".concat(Date.now()),t=document.createElement("style");t.id=a;var s=document.createTextNode(e);return t.appendChild(s),document.head.appendChild(t),t}function E(e){if(typeof e=="string"){var a=document.head.querySelector("#".concat(e));a==null||a.remove()}else{var t;e==null||(t=e.remove)===null||t===void 0||t.call(e)}}function N(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var o,u;if(!(s!=null&&(o=s.classList)!==null&&o!==void 0&&(u=o.contains)!==null&&u!==void 0&&u.call(o,c))){var p,M;s==null||(p=s.classList)===null||p===void 0||(M=p.add)===null||M===void 0||M.call(p,c)}})}function ee(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var o,u;s!=null&&(o=s.classList)!==null&&o!==void 0&&(u=o.contains)!==null&&u!==void 0&&u.call(o,c)&&s.classList.remove(c)})}function A(e,a){var t=Array.isArray(a)?a:[a],s=typeof e=="string"?document.querySelector(e):e;s&&t.forEach(function(c){var o,u;if(s!=null&&(o=s.classList)!==null&&o!==void 0&&(u=o.contains)!==null&&u!==void 0&&u.call(o,c))s.classList.remove(c);else{var p,M;s==null||(p=s.classList)===null||p===void 0||(M=p.add)===null||M===void 0||M.call(p,c)}})}var L=function(a,t){return typeof a=="function"?a.apply(null,t):void 0};function re(e,a,t){try{return L(e,a)}catch(s){L(t,[s])}}var T=function(a,t){try{return JSON.parse(a,t)}catch(s){return console.debug("[JSONSafeParse Error]",s),null}},b=function(a,t,s){return(typeof a=="function"?a():a)?t:s},x=function(a,t){return b(a,t,null)};function ne(e){var a=e.trim().toLocaleLowerCase();return a.replace(a[0],a[0].toUpperCase())}},73310:function(k,j,n){n.d(j,{t:function(){return f}});var m=n(92951),d=n.n(m),F=n(10947);d().options={closeButton:!0,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-top-right",preventDuplicates:!1,onclick:void 0,showDuration:300,hideDuration:1e3,timeOut:5e3,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};var f={success:function(l){return d().success(l.description,l.message)},info:function(l){return d().info(l.description,l.message)},warning:function(l){return d().warning(l.description,l.message)},error:function(l){return d().error(l.description,l.message)}}}}]);
